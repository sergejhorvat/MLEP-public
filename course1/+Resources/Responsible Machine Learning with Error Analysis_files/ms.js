/*!
 * 1DS JS SDK Analytics Web, 2.4.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
var e=this,t=function(e){"use strict";var i="function",r="object",t="undefined",a="prototype",o="hasOwnProperty";function n(){return typeof globalThis!==t&&globalThis?globalThis:typeof self!==t&&self?self:typeof window!==t&&window?window:typeof global!==t&&global?global:null}function s(e){var t=Object.create;if(t)return t(e);if(null==e)return{};if((t=typeof e)!==r&&t!==i)throw new TypeError("Object prototype may only be an Object:"+e);function n(){}return n[a]=e,new n}var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[o](n)&&(e[n]=t[n])})(e,t)};Ht=function(e,t){function n(){this.constructor=e}c(e,t),e[a]=null===t?s(t):(n[a]=t[a],new n)},(At=zt=n()||{}).__assign||(At.__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object[a][o].call(t,r)&&(e[r]=t[r]);return e}),At.__extends||(At.__extends=Ht),__assign=__assign||zt.__assign,__extends=__extends||zt.__extends;var U={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5},l=t,h=r,u=a,p="window",d="document",f="navigator",g="location",m="console",v="JSON",y=n;function I(e){var t=y();return t&&t[e]?t[e]:e===p&&T()?window:null}function T(){return typeof window===h&&window}function C(){return T()?window:I(p)}function E(){return typeof document===h&&document?document:I(d)}function S(){return!(typeof navigator!==h||!navigator)}function B(){return S()?navigator:I(f)}function H(){return typeof location===h&&location?location:I(g)}function _(){return I("performance")}function N(){return typeof JSON===h&&JSON||null!==I(v)}function b(){return N()?JSON||I(v):null}var x="attachEvent",w="addEventListener",A="detachEvent",P="removeEventListener",D=4294967296,O=4294967295,k=null,L=!1,R=123456789,M=987654321;function V(e){e<0&&(e>>>=0),R=123456789+e&O,M=987654321-e&O,L=!0}function F(){V(Math.random()*D^(new Date).getTime())}function z(e,t){return typeof e===t}function G(e){return z(e,t)||e===undefined}function W(e){return G(e)||null===e}function K(e,t){return e&&Object[a].hasOwnProperty.call(e,t)}function q(e){return z(e,r)}function j(e){return z(e,i)}function X(e,t,n,i){void 0===i&&(i=!1);var r=!1;if(!W(e))try{W(e[w])?W(e[x])||(e[x]("on"+t,n),r=!0):(e[w](t,n,i),r=!0)}catch(a){}return r}function Y(e,t,n,i){if(void 0===i&&(i=!1),!W(e))try{W(e[P])?W(e[A])||e[A]("on"+t,n):e[P](t,n,i)}catch(r){}}function J(e,t,n,i){var r=Object.defineProperty;if(r)try{var a={enumerable:!0,configurable:!0};return n&&(a.get=n),i&&(a.set=i),r(e,t,a),!0}catch(o){}return!1}function Q(e,t){if(e&&q(e))for(var n in e)K(e,n)&&t.call(e,n,e[n])}function Z(i,r,a){if(i&&r&&i!==r&&q(i)&&q(r))for(var e in r)!function(t){var e,n;$.isString(t)&&(j(e=r[t])?a&&!a(t,!0,r,i)||(i[t]=(n=t,function(){return r[n].apply(r,arguments)})):a&&!a(t,!1,r,i)||(K(i,t)&&delete i[t],J(i,t,function(){return r[t]},function(e){r[t]=e})||(i[t]=e)))}(e);return i}var $=(ee.isDate=function(e){return"[object Date]"===Object[a].toString.call(e)},ee.isArray=function(e){return"[object Array]"===Object[a].toString.call(e)},ee.isError=function(e){return"[object Error]"===Object[a].toString.call(e)},ee.isString=function(e){return z(e,"string")},ee.isNumber=function(e){return z(e,"number")},ee.isBoolean=function(e){return z(e,"boolean")},ee.disableCookies=function(){ee._canUseCookies=!1},ee.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(ne,function(e){var t=0|ee.randomValue(15);return("x"===e?t:3&t|8).toString(16)})},ee.toISOString=function(e){if(ee.isDate(e)){var t=function(e){return 1===(e=""+e).length?"0"+e:e};return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+(""+(e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},ee.arrForEach=function(e,t,n){for(var i=e.length,r=0;r<i;r++)r in e&&t.call(n||e,e[r],r,e)},ee.arrIndexOf=function(e,t,n){for(var i=e.length,r=Math.max(0<=(n=n||0)?n:i-Math.abs(n),0);r<i;r++)if(r in e&&e[r]===t)return r;return-1},ee.arrMap=function(e,t,n){for(var i=e.length,r=n||e,a=Array(i),o=0;o<i;o++)o in e&&(a[o]=t.call(r,e[o],e));return a},ee.arrReduce=function(e,t,n){var i,r=e.length,a=0;if(3<=arguments.length)i=n;else{for(;a<r&&!(a in e);)a++;i=e[a++]}for(;a<r;)a in e&&(i=t(i,e[a],a,e)),a++;return i},ee.strTrim=function(e){return ee.isString(e)?e.replace(/^\s+|\s+$/g,""):e},ee.objKeys=function(e){var t=!{toString:null}.propertyIsEnumerable("toString");if(!(j(e)||q(e)&&null!==e))throw new TypeError("objKeys called on non-object");var n,i=[];for(n in e)K(e,n)&&i.push(n);if(t)for(var r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=r.length,o=0;o<a;o++)K(e,r[o])&&i.push(r[o]);return i},ee.addEventHandler=function(e,t){var n=!1,i=C();return i&&(n=X(i,e,t),n=X(i.body,e,t)||n),(i=E())&&ie.Attach(i,e,t)||n},ee.dateNow=function(){var e=Date;return e.now?e.now():(new e).getTime()},ee.perfNow=function(){var e=_();return e&&e.now?e.now():ee.dateNow()},ee.newId=function(e){void 0===e&&(e=22);for(var t=ee.random32()>>>0,n=0,i="";i.length<e;)i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[0|63&t]||"",t>>>=6,5==++n&&(t=(ee.random32()<<2&4294967295|3&t)>>>0,n=0);return i},ee.isIE=function(){var e;return null===k&&(e=((B()||{}).userAgent||"").toLowerCase(),k=!!~e.indexOf("msie")||!!~e.indexOf("trident/")),k},ee.randomValue=function(e){return 0<e?Math.floor(ee.random32()/O*(e+1))>>>0:0},ee.random32=function(e){var t=(t=I("crypto")||I("msCrypto"))&&t.getRandomValues?t.getRandomValues(new Uint32Array(1))[0]&O:ee.isIE()?(L||F(),ee.mwcRandom32()&O):Math.floor(D*Math.random()|0);return e||(t>>>=0),t},ee.mwcRandomSeed=function(e){e?V(e):F()},ee.mwcRandom32=function(e){var t=((M=36969*(65535&M)+(M>>16)&O)<<16)+(65535&(R=18e3*(65535&R)+(R>>16)&O))>>>0&O|0;return e||(t>>>=0),t},ee.generateW3CId=function(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",i=0;i<4;i++)n+=t[15&(e=ee.random32())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var r=t[8+(3&ee.random32())|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+r+n.substr(16,3)+n.substr(19,12)},ee.isTypeof=z,ee.isUndefined=G,ee.isNullOrUndefined=W,ee.hasOwnProperty=K,ee.isFunction=j,ee.isObject=q,ee.objCreate=s,ee.objDefineAccessors=J,ee);function ee(){}var te,ne=/[xy]/g,ie=(re.Attach=X,re.AttachEvent=X,re.Detach=Y,re.DetachEvent=Y,re);function re(){}(Gt=te=te||{})[Gt.CRITICAL=1]="CRITICAL",Gt[Gt.WARNING=2]="WARNING";var ae={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103},oe="constructor",se="prototype",ce="function",le="_dynInstFuncs",ue="_isDynProxy",pe="_dynClass",de="_dynCls$",fe="_dynInstChk",ge=fe,he="_dfOpts",me="_unknown_",ve="__proto__",ye="useBaseInst",Ie="setInstFuncs",Te=Object,Ce=Te.getPrototypeOf,Ee=0;function Se(e,t){return e&&Te[se].hasOwnProperty.call(e,t)}function _e(e){return e&&(e===Te[se]||e===Array[se])}function Ne(e){return _e(e)||e===Function[se]}function be(e){if(e){if(Ce)return Ce(e);if(e=e[ve]||e[se]||(e[oe]?e[oe][se]:null))return e}return null}function xe(e,t){var n=[],i=Te.getOwnPropertyNames;if(i)n=i(e);else for(var r in e)"string"==typeof r&&Se(e,r)&&n.push(r);if(n&&0<n.length)for(var a=0;a<n.length;a++)t(n[a])}function we(e,t,n){return t!==oe&&typeof e[t]===ce&&(n||Se(e,t))}function Ae(e){throw new TypeError("DynamicProto: "+e)}function Pe(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return 1}function De(e,t){return Se(e,se)?e.name||t||me:((e||{})[oe]||{}).name||t||me}function Oe(e,i,t,n){Se(e,se)||Ae("theClass is an invalid class definition.");var r=e[se];!function(e){if(Ce)for(var t=[],n=be(i);n&&!Ne(n)&&!Pe(t,n);){if(n===e)return 1;t.push(n),n=be(n)}}(r)&&Ae("["+De(e)+"] is not in class hierarchy of ["+De(i)+"]");var a=null;Se(r,pe)?a=r[pe]:(a=de+De(e,"_")+"$"+Ee,Ee++,r[pe]=a);var o,s,c,l,u,p,d=Oe[he],f=!!d[ye];f&&n&&n[ye]!==undefined&&(f=!!n[ye]),t(i,function(e,t,n,a){function i(e,t,n){var i,r=t[n];return r[ue]&&a&&!1!==(i=e[le]||{})[ge]&&(r=(i[t[pe]]||{})[n]||r),function(){return r.apply(e,arguments)}}var r={};xe(n,function(e){r[e]=i(t,n,e)});for(var o=be(e),s=[];o&&!Ne(o)&&!Pe(s,o);)xe(o,function(e){!r[e]&&we(o,e,!Ce)&&(r[e]=i(t,o,e))}),s.push(o),o=be(o);return r}(r,i,(s={},xe(o=i,function(e){!s[e]&&we(o,e,!1)&&(s[e]=o[e])}),e=s),f)),c=r,a=a,l=i,u=e,n=!1!==(d=(d=!!Ce&&!!d[Ie])&&n?!!n[Ie]:d),_e(c)||(d=l[le]=l[le]||{},p=d[a]=d[a]||{},!1!==d[ge]&&(d[ge]=!!n),xe(l,function(e){var n,i,r;we(l,e,!1)&&l[e]!==u[e]&&(p[e]=l[e],delete l[e],Se(c,e)&&(!c[e]||c[e][ue])||(c[e]=(n=c,i=e,(r=function(){var e,t;return(function(e,t,n,i){var r=null;if(e&&Se(n,pe)){var a=e[le]||{};if((r=(a[n[pe]]||{})[t])||Ae("Missing ["+t+"] "+ce),!r[fe]&&!1!==a[ge]){for(var o=!Se(e,t),s=be(e),c=[];o&&s&&!Ne(s)&&!Pe(c,s);){var l=s[t];if(l){o=l===i;break}c.push(s),s=be(s)}try{o&&(e[t]=r),r[fe]=1}catch(u){a[ge]=!1}}}return r}(this,i,n,r)||(typeof(t=(t=n[e=i])===r?be(n)[e]:t)!==ce&&Ae("["+e+"] is not a "+ce),t)).apply(this,arguments)})[ue]=1,r)))}))}Oe[he]={setInstFuncs:!0,useBaseInst:!0};var ke="AITR_";function Le(e){return e?'"'+e.replace(/\"/g,"")+'"':""}var Re=(Me.dataType="MessageData",Me);function Me(e,t,n,i){void 0===n&&(n=!1),this.messageId=e,this.message=(n?"AI: ":"AI (Internal): ")+e,e="",N()&&(e=b().stringify(i)),e=(t?" message:"+Le(t):"")+(i?" props:"+Le(e):""),this.message+=e}var Ue=(Ve.prototype.enableDebugExceptions=function(){return!1},Ve.prototype.consoleLoggingLevel=function(){return 0},Ve.prototype.telemetryLoggingLevel=function(){return 1},Ve.prototype.maxInternalMessageLimit=function(){return 25},Ve.prototype.throwInternal=function(e,t,n,i,r){},Ve.prototype.warnToConsole=function(e){},Ve.prototype.resetInternalMessageCount=function(){},Ve.prototype.logInternalMessage=function(e,t){},Ve);function Ve(r){this.identifier="DiagnosticLogger",this.queue=[];var s=0,c={};Oe(Ve,this,function(a){var n=$.isNullOrUndefined,o=$.isUndefined,i=$.isFunction;function e(e,t){return e=r[e],n(e)?t:e}n(r)&&(r={}),a.consoleLoggingLevel=function(){return e("loggingLevelConsole",0)},a.telemetryLoggingLevel=function(){return e("loggingLevelTelemetry",1)},a.maxInternalMessageLimit=function(){return e("maxMessageLimit",25)},a.enableDebugExceptions=function(){return e("enableDebugExceptions",!1)},a.throwInternal=function(e,t,n,i,r){if(i=new Re(t,n,r=void 0!==r&&r,i),a.enableDebugExceptions())throw i;!o(i)&&i&&(o(i.message)||(r?(r=+i.messageId,!c[r]&&a.consoleLoggingLevel()>=te.WARNING&&(a.warnToConsole(i.message),c[r]=!0)):a.consoleLoggingLevel()>=te.WARNING&&a.warnToConsole(i.message),a.logInternalMessage(e,i)))},a.warnToConsole=function(e){var t,n=typeof console!==l?console:I(m);n&&(t="log",n.warn&&(t="warn"),i(n[t])&&n[t](e))},a.resetInternalMessageCount=function(){s=0,c={}},a.logInternalMessage=function(e,t){var n,i;s>=a.maxInternalMessageLimit()||(n=!0,i=ke+t.messageId,c[i]?n=!1:c[i]=!0,n&&(e<=a.telemetryLoggingLevel()&&(a.queue.push(t),s++),s===a.maxInternalMessageLimit()&&(t=new Re(ae.MessageLimitPerPVExceeded,e="Internal events throttle limit per PageView reached for this app.",!1),a.queue.push(t),a.warnToConsole(e))))}})}var Fe="ctx",Be=(He.ParentContextKey="parent",He.ChildrenContextKey="childEvts",He);function He(e,r,t){var n,a=this,o=!1;a.start=$.dateNow(),a.name=e,a.isAsync=t,a.isChildEvt=function(){return!1},$.isFunction(r)&&(o=$.objDefineAccessors(a,"payload",function(){return!n&&$.isFunction(r)&&(n=r(),r=null),n})),a.getCtx=function(e){return e?(e===He.ParentContextKey||e===He.ChildrenContextKey?a:a[Fe]||{})[e]:null},a.setCtx=function(e,t){e&&(e===He.ParentContextKey?(a[e]||(a.isChildEvt=function(){return!0}),a[e]=t):e===He.ChildrenContextKey?a[e]=t:(a[Fe]=a[Fe]||{})[e]=t)},a.complete=function(){var e=0,t=a.getCtx(He.ChildrenContextKey);if($.isArray(t))for(var n=0;n<t.length;n++){var i=t[n];i&&(e+=i.time)}a.time=$.dateNow()-a.start,a.exTime=a.time-e,a.complete=function(){},!o&&$.isFunction(r)&&(a.payload=r())}}var ze=(Ge.prototype.create=function(e,t,n){return null},Ge.prototype.fire=function(e){},Ge.prototype.setCtx=function(e,t){},Ge.prototype.getCtx=function(e){},Ge);function Ge(t){this.ctx={},Oe(Ge,this,function(n){n.create=function(e,t,n){return new Be(e,t,n)},n.fire=function(e){e&&(e.complete(),t&&t.perfEvent(e))},n.setCtx=function(e,t){e&&((n[Fe]=n[Fe]||{})[e]=t)},n.getCtx=function(e){return(n[Fe]||{})[e]}})}var We="CoreUtils.doPerf";function Ke(e,t,n,i,r){if(e){var a=e;if(a=a&&$.isFunction(a.getPerfMgr)?a.getPerfMgr():a){var o,s=void 0,e=a.getCtx(We);try{if(s=a.create(t(),i,r))return e&&s.setCtx&&(s.setCtx(Be.ParentContextKey,e),e.getCtx&&e.setCtx&&((o=e.getCtx(Be.ChildrenContextKey))||(o=[],e.setCtx(Be.ChildrenContextKey,o)),o.push(s))),a.setCtx(We,s),n(s)}catch(c){s&&s.setCtx&&s.setCtx("exception",c)}finally{s&&a.fire(s),a.setCtx(We,e)}}}return n()}var qe=$.isFunction,je=function(r,t){var a=this,o=null,s=qe(r.processTelemetry),c=qe(r.setNextPlugin);a._hasRun=!1,a.getPlugin=function(){return r},a.getNext=function(){return o},a.setNext=function(e){o=e},a.processTelemetry=function(n,i){var e=r?r.identifier:"TelemetryPluginChain";Ke((i=i||t)?i.core():null,function(){return e+":processTelemetry"},function(){if(r&&s){a._hasRun=!0;try{i.setNext(o),c&&r.setNextPlugin(o),o&&(o._hasRun=!1),r.processTelemetry(n,i)}catch(t){var e=o&&o._hasRun;o&&e||i.diagLog().throwInternal(te.CRITICAL,ae.PluginException,"Plugin ["+r.identifier+"] failed during processTelemetry - "+t),o&&!e&&o.processTelemetry(n,i)}}else o&&(a._hasRun=!0,o.processTelemetry(n,i))},function(){return{item:n}},!n.sync)}},Xe=$.isNullOrUndefined;function Ye(e,t){var n=[];if(e&&0<e.length)for(var i=null,r=0;r<e.length;r++){var a=e[r];a&&$.isFunction(a.processTelemetry)&&(a=new je(a,t),n.push(a),i&&i.setNext(a),i=a)}return 0<n.length?n[0]:null}var Je=function Yo(e,r,n,t){var i,a,o,s,c=this,l=null;null!==t&&(e&&$.isFunction(e.getPlugin)?l=function(e,t,n){var i=[],r=!n;if(e)for(;e;){var a=e.getPlugin();!r&&a!==n||(r=!0,i.push(a)),e=e.getNext()}return r||i.push(n),Ye(i,t)}(e,c,t||e.getPlugin()):t?(i=c,o=e,s=!1,(a=t)&&e&&(o=[],$.arrForEach(e,function(e){!s&&e!==a||(s=!0,o.push(e))})),a&&!s&&(o=o||[]).push(a),l=Ye(o,i)):$.isUndefined(t)&&(l=Ye(e,c))),c.core=function(){return n},c.diagLog=function(){return(n||{}).logger||new Ue(r||{})},c.getCfg=function(){return r},c.getExtCfg=function(e,t){var n,i;return void 0===t&&(t={}),!r||(i=r.extensionConfig)&&e&&(n=i[e]),n||t},c.getConfig=function(e,t,n){var i;return void 0===n&&(n=!1),(e=c.getExtCfg(e,null))&&!Xe(e[t])?i=e[t]:r&&!Xe(r[t])&&(i=r[t]),Xe(i)?n:i},c.hasNext=function(){return null!=l},c.getNext=function(){return l},c.setNext=function(e){l=e},c.processNext=function(e){var t=l;t&&(l=t.getNext(),t.processTelemetry(e,c))},c.createNew=function(e,t){return new Yo((e=void 0===e?null:e)||l,r,n,t)}},Qe=$.isFunction,Ze="getPlugin",$e=(et.prototype.initialize=function(e,t,n,i){this._baseTelInit(e,t,n,i)},et);function et(){var a=this,o=!1,s=null,c=null;a.core=null,a.diagLog=function(e){return a._getTelCtx(e).diagLog()},a.isInitialized=function(){return o},a.setInitialized=function(e){o=e},a.setNextPlugin=function(e){c=e},a.processNext=function(e,t){t?t.processNext(e):c&&Qe(c.processTelemetry)&&c.processTelemetry(e,null)},a._getTelCtx=function(e){var t=e=void 0===e?null:e;return t||(e=s||new Je(null,{},a.core),t=c&&c[Ze]?e.createNew(null,c[Ze]):e.createNew(null,c)),t},a._baseTelInit=function(e,t,n,i){e&&(e.extensionConfig=e.extensionConfig||[]),!i&&t&&(i=t.getProcessTelContext().getNext());var r=c;c&&c[Ze]&&(r=c[Ze]()),a.core=t,s=new Je(i,e,t,r),o=!0}}var tt=$.isFunction,nt="processTelemetry",it="priority",rt="setNextPlugin",at="isInitialized";function ot(t,n){for(var e=[],i=null,r=t.getNext();r;){var a=r.getPlugin();a&&(i&&tt(i[rt])&&tt(a[nt])&&i[rt](a),tt(a[at])&&a[at]()||e.push(a),i=a,r=r.getNext())}$.arrForEach(e,function(e){e.initialize(t.getCfg(),t.core(),n,t.getNext())})}function st(e){return e.sort(function(e,t){var n=0,i=tt(t[nt]);return tt(e[nt])?n=i?e[it]-t[it]:1:i&&(n=-1),n})}var ct,lt=500,ut="Channel has invalid priority",pt=$.objDefineAccessors,dt=(ct=$e,__extends(ft,ct),ft.prototype.processTelemetry=function(e,t){},ft.prototype.getChannelControls=function(){return null},ft.prototype.initialize=function(e,t,n){},ft._staticInit=(pt(ft.prototype,"ChannelControls",ft.prototype.getChannelControls),void pt(ft.prototype,"channelQueue",ft.prototype.getChannelControls)),ft);function ft(){var i=ct.call(this)||this;i.identifier="ChannelControllerPlugin",i.priority=lt;var c,l=$.arrForEach;function u(e){e&&0<e.length&&(e=e.sort(function(e,t){return e.priority-t.priority}),l(e,function(e){if(e.priority<lt)throw Error(ut+e.identifier)}),c.push(e))}return Oe(ft,i,function(o,s){o.setNextPlugin=function(e){},o.processTelemetry=function(t,n){c&&l(c,function(e){0<e.length&&i._getTelCtx(n).createNew(e).processNext(t)})},o.getChannelControls=function(){return c},o.initialize=function(t,n,i){var e,r,a;o.isInitialized()||(s.initialize(t,n,i),t.isCookieUseDisabled&&$.disableCookies(),e=(t||{}).channels,r=i,c=[],e&&l(e,u),r&&(a=[],l(r,function(e){e.priority>lt&&a.push(e)}),u(a)),l(c,function(e){return ot(new Je(e,t,n),i)}))}}),i}var gt="Extensions must provide callback to initialize",ht=$.arrForEach,mt=$.isNullOrUndefined,vt="_notificationManager",yt=(It.prototype.initialize=function(e,t,n,i){},It.prototype.getTransmissionControls=function(){return null},It.prototype.track=function(e){},It.prototype.getProcessTelContext=function(){return null},It.prototype.getNotifyMgr=function(){return null},It.prototype.getPerfMgr=function(){return null},It.prototype.setPerfMgr=function(e){},It.prototype.eventCnt=function(){return 0},It.prototype.releaseQueue=function(){},It);function It(){var t,s,c,n,l=!1;Oe(It,this,function(o){o._extensions=[],s=new dt,o.logger=$.objCreate({throwInternal:function(e,t,n,i,r){},warnToConsole:function(e){},resetInternalMessageCount:function(){}}),t=[],o.isInitialized=function(){return l},o.initialize=function(e,t,i,n){if(o.isInitialized())throw Error("Core should not be initialized more than once");if(!e||mt(e.instrumentationKey))throw Error("Please provide instrumentation key");c=n,o[vt]=n,o.config=e||{},e.extensions=mt(e.extensions)?[]:e.extensions,(e.extensionConfig=mt(e.extensionConfig)?{}:e.extensionConfig).NotificationManager=n,i&&(o.logger=i),(n=[]).push.apply(n,t.concat(e.extensions));var n=st(n),r=[],a={};if(ht(n,function(e){if(mt(e)||mt(e.initialize))throw Error(gt);var t=e.priority,n=e.identifier;e&&t&&(mt(a[t])?a[t]=n:i.warnToConsole("Two extensions have same priority #"+t+" - "+a[t]+", "+n)),(!t||t<s.priority)&&r.push(e)}),n.push(s),r.push(s),n=st(n),o._extensions=n,ot(new Je([s],e,o),n),ot(new Je(r,e,o),n),o._extensions=r,0===o.getTransmissionControls().length)throw Error("No channels available");l=!0,o.releaseQueue()},o.getTransmissionControls=function(){return s.getChannelControls()},o.track=function(e){e.iKey||(e.iKey=o.config.instrumentationKey),e.time||(e.time=$.toISOString(new Date)),mt(e.ver)&&(e.ver="4.0"),o.isInitialized()?o.getProcessTelContext().processNext(e):t.push(e)},o.getProcessTelContext=function(){var e=o._extensions,t=e;return e&&0!==e.length||(t=[s]),new Je(t,o.config,o)},o.getNotifyMgr=function(){return c||(c=$.objCreate({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){},eventsSendRequest:function(e,t){}}),o[vt]=c),c},o.getPerfMgr=function(){return n||o.config&&o.config.enablePerfMgr&&(n=new ze(o.getNotifyMgr())),n},o.setPerfMgr=function(e){n=e},o.eventCnt=function(){return t.length},o.releaseQueue=function(){0<t.length&&(ht(t,function(e){o.getProcessTelContext().processNext(e)}),t=[])}})}var Tt=(Ct.prototype.addNotificationListener=function(e){},Ct.prototype.removeNotificationListener=function(e){},Ct.prototype.eventsSent=function(e){},Ct.prototype.eventsDiscarded=function(e,t){},Ct.prototype.eventsSendRequest=function(e,t){},Ct);function Ct(e){this.listeners=[];var a=$.arrForEach,t=!!(e||{}).perfEvtsSendAll;Oe(Ct,this,function(r){r.addNotificationListener=function(e){r.listeners.push(e)},r.removeNotificationListener=function(e){for(var t=$.arrIndexOf(r.listeners,e);-1<t;)r.listeners.splice(t,1),t=$.arrIndexOf(r.listeners,e)},r.eventsSent=function(t){a(r.listeners,function(e){e&&e.eventsSent&&setTimeout(function(){return e.eventsSent(t)},0)})},r.eventsDiscarded=function(t,n){a(r.listeners,function(e){e&&e.eventsDiscarded&&setTimeout(function(){return e.eventsDiscarded(t,n)},0)})},r.eventsSendRequest=function(n,i){a(r.listeners,function(e){if(e&&e.eventsSendRequest)if(i)setTimeout(function(){return e.eventsSendRequest(n,i)},0);else try{e.eventsSendRequest(n,i)}catch(t){}})},r.perfEvent=function(n){n&&(!t&&n.isChildEvt()||a(r.listeners,function(e){if(e&&e.perfEvent)if(n.isAsync)setTimeout(function(){return e.perfEvent(n)},0);else try{e.perfEvent(n)}catch(t){}}))}})}var Et,St=(Et=yt,__extends(_t,Et),_t.prototype.initialize=function(e,t,n,i){},_t.prototype.track=function(e){},_t.prototype.addNotificationListener=function(e){},_t.prototype.removeNotificationListener=function(e){},_t.prototype.pollInternalLogs=function(e){return 0},_t);function _t(){var e=Et.call(this)||this;return Oe(_t,e,function(n,r){function t(e){var t=n.getNotifyMgr();t&&t.eventsDiscarded([e],U.InvalidEvent)}n.initialize=function(e,t,n,i){r.initialize(e,t,n||new Ue(e),i||new Tt(e))},n.track=function(e){Ke(n.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){if(null===e)throw t(e),Error("Invalid telemetry item");!function(e){if($.isNullOrUndefined(e.name))throw t(e),Error("telemetry name required")}(e),r.track(e)},function(){return{item:e}},!e.sync)},n.addNotificationListener=function(e){var t=n.getNotifyMgr();t&&t.addNotificationListener(e)},n.removeNotificationListener=function(e){var t=n.getNotifyMgr();t&&t.removeNotificationListener(e)},n.pollInternalLogs=function(t){var e=n.config.diagnosticLogInterval;return setInterval(function(){var e=n.logger?n.logger.queue:[];$.arrForEach(e,function(e){e={name:t||"InternalMessageId: "+e.messageId,iKey:n.config.instrumentationKey,time:$.toISOString(new Date),baseType:Re.dataType,baseData:{message:e.message}},n.track(e)}),e.length=0},e=e&&0<e?e:1e4)}}),e}var Nt={Normal:1,CostDeferred:2,RealTime:3},bt=__assign({},ae,{AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519}),xt="1DS-Web-JS-2.4.7",wt="undefined",At=wt,Pt="prototype",Dt={Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9},Ot=null,kt=$.isUndefined,Lt=$.isNullOrUndefined;function Rt(e){return!kt(e)}var Mt,Ut=$.hasOwnProperty,Vt=null,Ft=null,Bt=$.arrForEach,Ht=$.arrIndexOf,zt=$.arrMap,Gt=$.arrReduce,Wt=$.objKeys,pt=$.toISOString,Kt=function(){var e=B();return!(!e||!e.product)&&"ReactNative"===e.product},qt=$.isString,jt=$.isNumber,Xt=$.isBoolean,Yt=$.isFunction,Jt=$.isArray,yt=$.isObject,Qt=$.strTrim,Zt=!!E(),$t=!!C();function en(e){return!(Lt(e)||""===e)}function tn(e){if(e){var t=e.indexOf("-");if(-1<t)return e.substring(0,t)}return""}function nn(){return Vt=null===Vt?S()&&!!B().sendBeacon:Vt}function rn(e){return!!(e&&jt(e)&&1<=e&&e<=3)}function an(e,t,n){if(!qt(e)||Lt(t)||""===t)return null;if(qt(t)||jt(t)||Xt(t)||Jt(t))t={value:t};else if("object"!=typeof t||t.hasOwnProperty("value")){if(Lt(t.value)||""===t.value||!qt(t.value)&&!jt(t.value)&&!Xt(t.value)&&!Jt(t.value))return null}else t={value:n?JSON.stringify(t):t};if(Jt(t.value)&&!(0<t.value.length))return null;if(Rt(t.kind)){if(Jt(t.value)||(n=t.kind,!jt(n)||!(0<=n&&n<=13||32===n)))return null;t.value=t.value.toString()}return t}function on(){if(typeof XMLHttpRequest!==undefined){var e=I("XMLHttpRequest");if(e)return e=new e,!(!kt(e.withCredentials)||typeof XDomainRequest===undefined)}}function sn(e,t,n){var i=-1;return kt(e)?i:(t&&0<t&&(32===t?i=8192:t<=13&&(i=t<<5)),Rt(n)&&jt(t=n)&&0<=t&&t<=9?(i=-1===i?0:i)|n:(Jt(e)&&(e=e[0]),-1!==i?i|(kt(n=e)?-1:jt(n)?Dt.Double:qt(n)?Dt.String:Xt(n)?Dt.Bool:-1):jt(e)?Dt.Double:i))}function cn(){if(Mt===undefined){Mt=!1;try{var e=E(),t=B();e&&!kt(e.cookie)&&t&&t.cookieEnabled&&(Mt=!0)}catch(n){}}return Mt}function ln(e){return!(!qt(e)||!~e.indexOf("CPU iPhone OS 12")&&!~e.indexOf("iPad; CPU OS 12")&&!(~e.indexOf("Macintosh; Intel Mac OS X 10_14")&&~e.indexOf("Version/")&&~e.indexOf("Safari"))&&(!~e.indexOf("Macintosh; Intel Mac OS X 10_14")||(t=e.length,"AppleWebKit/605.1.15 (KHTML, like Gecko)"!=e.substring(0<=(n=t-40)?n:0,t)))&&!~e.indexOf("Chrome/5")&&!~e.indexOf("Chrome/6")&&(!~e.indexOf("UnrealEngine")||~e.indexOf("Chrome"))&&!~e.indexOf("UCBrowser/12")&&!~e.indexOf("UCBrowser/11"));var t,n}function un(e,t,n){var i,r;cn()&&(i="",(r=H())&&"https:"===r.protocol&&(i=";secure",(Ot=null===Ot?ln((B()||{}).userAgent):Ot)||(t+=";SameSite=None")),(r=new Date).setTime(r.getTime()+24*n*60*60*1e3),r="; expires="+r.toUTCString(),E().cookie=e+"="+t+r+"; path=/"+i)}function pn(e){un(e,"",-1)}function dn(e){if(cn()){e+="=";for(var t=decodeURIComponent((E()||{}).cookie||"").split(";"),n=0;n<t.length;n++){for(var i=t[n],r=0;" "==(i[0|r]||"");)r++;if(!(i=i.substring(r)).indexOf(e))return i.substring(e.length,i.length)}}return""}function fn(e){void 0===e&&(e="D");var t=$.newGuid();return"B"===e?t="{"+t+"}":"P"==e?t="("+t+")":"N"==e&&(t=t.replace(/-/g,"")),t}function gn(e,t,n,i,r){var a={},o=!1,s=0,c=arguments.length,l=Object[Pt],u=arguments;for("[object Boolean]"===l.toString.call(u[0])&&(o=u[0],s++);s<c;s++)!function(e){for(var t in e)Ut(e,t)&&(o&&"[object Object]"===l.toString.call(e[t])?a[t]=gn(!0,a[t],e[t]):a[t]=e[t])}(u[s]);return a}var hn=$.perfNow;function mn(e){return e<10?"0"+e:e.toString()}function vn(e,t,n,i){var r=Object.defineProperty;if(r)try{var a={enumerable:!0,configurable:!0};return n&&(a.get=n),i&&(a.set=i),r(e,t,a),!0}catch(o){}return!1}function yn(e){var t=Cn("beforeunload",e),t=Cn("unload",e)||t;return Cn("pagehide",e)||t}function In(e,t){e.timings=e.timings||{},e.timings.processTelemetryStart=e.timings.processTelemetryStart||{},e.timings.processTelemetryStart[t]=hn()}var Tn,Cn=$.addEventHandler,At=function(e){var t=Object.freeze;return t?t(e):e}({__proto__:null,Version:"2.4.7",FullVersionString:xt,strUndefined:wt,strObject:"object",Undefined:At,arrForEach:Bt,arrIndexOf:Ht,arrMap:zt,arrReduce:Gt,objKeys:Wt,toISOString:pt,isReactNative:Kt,isString:qt,isNumber:jt,isBoolean:Xt,isFunction:Yt,isArray:Jt,isObject:yt,strTrim:Qt,isDocumentObjectAvailable:Zt,isWindowObjectAvailable:$t,isValueAssigned:en,getTenantId:tn,isBeaconsSupported:nn,isUint8ArrayAvailable:function(){return Ft=null===Ft?Rt(Uint8Array)&&!(Rt(e=B())&&e.userAgent&&(~(e=e.userAgent.toLowerCase()).indexOf("safari")||~e.indexOf("firefox"))&&!~e.indexOf("chrome"))&&!Kt():Ft;var e},isLatency:rn,sanitizeProperty:an,getISOString:function(e){return e.getUTCFullYear()+"-"+mn(1+e.getUTCMonth())+"-"+mn(e.getUTCDate())+"T"+mn(e.getUTCHours())+":"+mn(e.getUTCMinutes())+":"+mn(e.getUTCSeconds())+"."+((e=e.getUTCMilliseconds())<10?"00"+e:e<100?"0"+e:e.toString())+"Z"},useXDomainRequest:on,getCommonSchemaMetaData:sn,cookieAvailable:cn,disallowsSameSiteNone:ln,setCookie:un,deleteCookie:pn,getCookie:dn,createGuid:fn,extend:gn,getTime:hn,objDefineAccessors:vn,addPageUnloadEventListener:yn,setProcessTelemetryTimings:In,addEventHandler:Cn}),En="version",Sn="properties",Ht=(Tn=St,__extends(_n,Tn),_n.prototype.initialize=function(e,t,n,i){},_n.prototype.track=function(e){},_n);function _n(){var e=Tn.call(this)||this;return e.pluginVersionStringArr=[],e.pluginVersionString="",Oe(_n,e,function(o,s){o.initialize=function(n,i,r,a){Ke(o,function(){return"AppInsightsCore.initialize"},function(){if(n){n.endpointUrl||(n.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var e=n.propertyStorageOverride;if(e&&(!e.getProperty||!e.setProperty))throw"Invalid property storage override passed.";n.channels&&Bt(n.channels,function(e){e&&Bt(e,function(e){e.identifier&&e.version&&(e=e.identifier+"="+e.version,o.pluginVersionStringArr.push(e))})})}o.getWParam=function(){return"undefined"!=typeof document?0:-1},i&&Bt(i,function(e){e&&e.identifier&&e.version&&(e=e.identifier+"="+e.version,o.pluginVersionStringArr.push(e))}),o.pluginVersionString=o.pluginVersionStringArr.join(";");try{s.initialize(n,i,r,a)}catch(t){o.logger.throwInternal(te.CRITICAL,bt.ErrorProvidedChannels,"Channels must be provided through config.channels only")}o.pollInternalLogs("InternalLog")},function(){return{config:n,extensions:i,logger:r,notificationManager:a}})},o.track=function(n){Ke(o,function(){return"AppInsightsCore.track"},function(){var e,t=n;t&&(t.timings=t.timings||{},t.timings.trackStart=hn(),rn(t.latency)||(t.latency=Nt.Normal),(e=t.ext=t.ext||{}).sdk=e.sdk||{},e.sdk.ver=xt,(e=t.baseData=t.baseData||{})[Sn]||(e[Sn]={}),(e=e[Sn])[En]||(e[En]=""),""!=o.pluginVersionString&&(e[En]=o.pluginVersionString)),s.track(t)},function(){return{item:n}},!n.sync)}}),e}var Nn=["AX","EX","SF","CS","CF","CT","CU","DC","DF","H5","HL","WS","WP"];function bn(e,t){void 0===t&&(t=Nn);var n=null;if(e)for(var i=e.split(","),r=0;r<i.length;r++)!function(e,t){if(void 0===t&&(t=Nn),e&&!(e.length<4)){for(var n=!1,i=e.substring(0,3).toString().toUpperCase(),r=0;r<t.length;r++)if(t[r]+":"==i&&e.length<=256){n=!0;break}return n}}(i[r],t)||(n?n+=","+i[r]:n=i[r]);return n}var xn=(wn.prototype.getExpId=function(){return this._propertiesConfig.expId?this._readExpIdFromCoreData(this._propertiesConfig.expId):this._readExpIdFromCookie()},wn.prototype._getMetaDataFromDOM=function(e){var t={},n=E();if(n)for(var i=n&&n.querySelectorAll("meta"),r=0;r<i.length;r++){var a=i[r];a.name&&(a.name.toLowerCase().indexOf(e)||(t[a.name.replace(e,"")]=a.content))}return t},wn.prototype._setAppExpId=function(e){e!==this.appExpId&&(this.appExpId=bn(e,this.flightIdNameSpaces))},wn.prototype._getAppExpId=function(){return this.appExpId},wn.prototype._readExpIdFromCookie=function(){return this._setAppExpId(dn(this.expIdCookieName)),this._getAppExpId()},wn.prototype._readExpIdFromCoreData=function(e){return this._setAppExpId(e),this._getAppExpId()},wn.validateAppExpId=bn,wn._staticInit=void vn(wn.prototype,"expId",wn.prototype.getExpId),wn);function wn(e){this.appExpId=null,this.flightIdNameSpaces=Nn.slice(0),this.expIdCookieName="Treatments",this._propertiesConfig=e;var t,n=E();n&&(t=n.documentElement,n&&(this.locale=t.lang)),this.env=e.env||this._getMetaDataFromDOM("awa-").env}var An,Pn=function(){},Dn=undefined,On=null;function kn(e,t,n,i){var r="",a="",o=E();o&&(i&&(r=";domain="+i),(i=H())&&"https:"===i.protocol&&(a=";secure",(On=null===On?ln((B()||{}).userAgent):On)||(n+=";SameSite=None")),cn()&&(o.cookie=t+"="+n+r+";path=/"+a))}function Ln(){return Dn=Dn===undefined?!!Mn(An.LocalStorage):Dn}function Rn(){return Ln()?Mn(An.LocalStorage):null}function Mn(e){var t,n,i=null;try{var r=y();if(!r)return null;n=new Date,(i=e===An.LocalStorage?r.localStorage:r.sessionStorage)&&Yt(i.setItem)&&(i.setItem(n,n),t=i.getItem(n)!=n,i.removeItem(n),t&&(i=null))}catch(a){i=null}return i}function Un(e,t,n){var i=Rn();if(null!==i)try{return i.setItem(t,n),1}catch(r){Dn=!1,e.throwInternal(te.CRITICAL,bt.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+r)}}function Vn(e,t){var n=Rn();if(null!==n)try{return n.getItem(t)}catch(i){Dn=!1,e.throwInternal(te.CRITICAL,bt.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+i)}return null}(zt=An=An||{})[zt.LocalStorage=0]="LocalStorage",zt[zt.SessionStorage=1]="SessionStorage";var Fn=$.toISOString,Bn=(Hn.prototype.getLocalId=function(){if(this._customLocalId)return this._customLocalId;var e=dn("MUID");return e&&this.setLocalId("t:"+e),undefined},Hn.prototype.setLocalId=function(e){this._customLocalId=e},Hn.cookieSeparator="|",Hn.userCookieName="ai_user",Hn._staticInit=void vn(Hn.prototype,"localId",Hn.prototype.getLocalId,Hn.prototype.setLocalId),Hn);function Hn(e,t,n){var i,r;this._logger=n,!e.disableCookiesUsage&&cn()&&((n=dn("MUID"))&&this.setLocalId("t:"+n),t.enableApplicationInsightsUser&&(!(n=dn(Hn.userCookieName))||0<(i=n.split(Hn.cookieSeparator)).length&&(this.id=i[0]),this.id||(this.id=$.newId(e&&!$.isUndefined(e.idLength)?e.idLength:22),r=Fn(i=new Date),this.accountAcquisitionDate=r,i.setTime(31536e6+i.getTime()),e=[this.id,r],r=t.cookieDomain||undefined,kn(this._logger,Hn.userCookieName,e.join(Hn.cookieSeparator)+";expires="+i.toUTCString(),r)))),"undefined"!=typeof navigator&&(this.locale=(r=navigator).userLanguage||r.language)}var zn="Unknown",Gn=(Wn.prototype.getUserConsent=function(){return this._propertiesConfig.userConsented||!!dn(this._propertiesConfig.userConsentCookieName||"MSCC")},Wn.prototype.getUserConsentDetails=function(){try{if(this._propertiesConfig.callback&&this._propertiesConfig.callback.userConsentDetails){var e=this._propertiesConfig.callback.userConsentDetails();if(e)return JSON.stringify({Required:e.Required||!1,Analytics:e.Analytics||!1,SocialMedia:e.SocialMedia||!1,Advertising:e.Advertising||!1})}}catch(t){}return null},Wn.prototype._getBrowserName=function(e){return this._userAgentContainsString("OPR/",e)?"Opera":this._userAgentContainsString("PhantomJS",e)?"PhantomJS":this._userAgentContainsString("Edge",e)||this._userAgentContainsString("Edg/",e)?"Edge":this._userAgentContainsString("Electron",e)?"Electron":this._userAgentContainsString("Chrome",e)?"Chrome":this._userAgentContainsString("Trident",e)?"MSIE":this._userAgentContainsString("Firefox",e)?"Firefox":this._userAgentContainsString("Safari",e)?"Safari":this._userAgentContainsString("SkypeShell",e)?"SkypeShell":zn},Wn.prototype._userAgentContainsString=function(e,t){return!!~t.indexOf(e)},Wn.prototype._getBrowserVersion=function(e,t){return"MSIE"===t?this._getIeVersion(e):this._getOtherVersion(t,e)},Wn.prototype._getIeVersion=function(e){var t=e.match(/MSIE ([\d,.]+)/);return t?t[1]:(e=e.match(/rv:([\d,.]+)/))?e[1]:void 0},Wn.prototype._getOtherVersion=function(e,t){return"Safari"===e?e="Version":"Edge"===e&&this._userAgentContainsString("Edg/",t)&&(e="Edg"),(e=t.match(RegExp(e+"/([\\d,.]+)")))?e[1]:zn},Wn.prototype._getScreenResolution=function(){var e={h:0,w:0},t=C();return t&&t.screen&&(e.h=screen.height,e.w=screen.width),e},Wn._staticInit=void vn(Wn.prototype,"userConsent",Wn.prototype.getUserConsent),Wn);function Wn(e){this._propertiesConfig=e;var t=H();!t||(i=t.hostname)&&(this.domain="file:"===t.protocol?"local":i);var n,i="undefined"!=typeof navigator?navigator.userAgent:"";e.userAgent&&(i=e.userAgent),e.populateBrowserInfo&&(i&&(n=this._getBrowserName(i),this.browser=n,this.browserVer=this._getBrowserVersion(i,n)),n=this._getScreenResolution(),this.screenRes=n.w+"X"+n.h)}var Kn=/(windows|win32)/i,qn=/ arm;/i,jn=/windows\sphone\s\d+\.\d+/i,Xn=/(macintosh|mac os x)/i,Yn=/(ipad|iphone|ipod)(?=.*like mac os x)/i,Jn=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,Qn=/android/i,Zn=/CrOS/i,$n={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},ei="([\\d,_,.]+)",ti="Unknown",ni=(ii.prototype._getOsName=function(e){return e.match(jn)?"Windows Phone":e.match(qn)?"Windows RT":e.match(Kn)?"Windows":e.match(Yn)?"iOS":e.match(Qn)?"Android":e.match(Jn)?"Linux":e.match(Zn)?"Chrome OS":~e.indexOf("x11")?"Unix":~e.indexOf("blackberry")?"BlackBerry":~e.indexOf("symbian")?"Symbian":~e.indexOf("nokia")?"Nokia":e.match(Xn)?"Mac OS X":ti},ii.prototype._getOsVersion=function(e,t){return"Windows"===t?this._getGenericOsVersion(e,"Windows NT"):"Android"===t?this._getGenericOsVersion(e,t):"Mac OS X"===t?this._getMacOsxVersion(e):"iOS"===t?this._getIosVersion(e):ti},ii.prototype._getGenericOsVersion=function(e,t){return(t=e.match(RegExp(t+" ([\\d,.]+)")))?$n[t[1]]||t[1]:ti},ii.prototype._getMacOsxVersion=function(e){var t=e.match(RegExp("Mac OS X "+ei));return t&&(e=t[1].replace(/_/g,"."))?(t=this._getDelimiter(e))?e.split(t)[0]:e:ti},ii.prototype._getIosVersion=function(e){var t=e.match(RegExp("OS "+ei));return t&&(e=t[1].replace(/_/g,"."))?(t=this._getDelimiter(e))?e.split(t)[0]:e:ti},ii.prototype._getDelimiter=function(e){return~e.indexOf(".")?".":~e.indexOf("_")?"_":null},ii);function ii(e){var t="undefined"!=typeof navigator?navigator.userAgent:"";(t=e.userAgent||t)&&e.populateOperatingSystemInfo&&(e=this._getOsName(t.toLowerCase()),this.name=e,this.ver=this._getOsVersion(t,e))}var ri=(ai.prototype.getMsfpc=function(){return dn("MSFPC")},ai.prototype.getAnid=function(){return dn("ANON").slice(0,34)},ai._staticInit=(vn(ai.prototype,"msfpc",ai.prototype.getMsfpc),void vn(ai.prototype,"anid",ai.prototype.getAnid)),ai);function ai(e){e.serviceName&&(this.serviceName=e.serviceName)}var oi=function(e){this.popSample=100,this.eventFlags=0,e.hashIdentifiers&&(this.eventFlags=1048576|this.eventFlags),e.dropIdentifiers&&(this.eventFlags=2097152|this.eventFlags)},si=function(){var e=0<(t=((e=(new Date).getTimezoneOffset())-(n=e%60))/60)?"-":"+",t=Math.abs(t),n=Math.abs(n);this.tz=e+(t<10?"0"+t:t.toString())+":"+(n<10?"0"+n:n.toString())},ci=function(){},li=(ui.prototype.setId=function(e){this.customId=e},ui._staticInit=void vn(ui.prototype,"id",ui.prototype.getId=function(){return qt(this.customId)?this.customId:this.automaticId},ui.prototype.setId),ui);function ui(){}var pi=function(e,t,n,i){e.enableApplicationInsightsTrace&&(this.traceId=t||$.generateW3CId(),this.parentId=n,this.name=i,(i=H())&&i.pathname&&(this.name=i.pathname))},di=(fi.id="id",fi.ver="ver",fi.appName="name",fi.locale="locale",fi.expId="expId",fi.env="env",fi);function fi(){}var gi=(hi.domain="domain",hi.browser="browser",hi.browserVer="browserVer",hi.screenRes="screenRes",hi.userConsent="userConsent",hi.consentDetails="consentDetails",hi);function hi(){}var mi=(vi.locale="locale",vi.localId="localId",vi.id="id",vi);function vi(){}var yi=(Ii.osName="name",Ii.ver="ver",Ii);function Ii(){}var Ti=(Ci.ver="ver",Ci.seq="seq",Ci.installId="installId",Ci.epoch="epoch",Ci);function Ci(){}var Ei=(Si.msfpc="msfpc",Si.anid="anid",Si.serviceName="serviceName",Si);function Si(){}var _i=(Ni.popSample="popSample",Ni.eventFlags="eventFlags",Ni);function Ni(){}var bi=(xi.tz="tz",xi);function xi(){}var wi=(Ai.sessionId="sesId",Ai);function Ai(){}var Pi=(Di.localId="localId",Di.deviceClass="deviceClass",Di.make="make",Di.model="model",Di);function Di(){}var Oi=(ki.role="role",ki.roleInstance="roleInstance",ki.roleVer="roleVer",ki);function ki(){}var Li=(Ri.traceId="traceID",Ri.traceName="name",Ri.parentId="parentID",Ri);function Ri(){}var Mi=(Ui.UserExt="user",Ui.DeviceExt="device",Ui.TraceExt="trace",Ui.WebExt="web",Ui.AppExt="app",Ui.OSExt="os",Ui.SdkExt="sdk",Ui.IntWebExt="intweb",Ui.UtcExt="utc",Ui.LocExt="loc",Ui.CloudExt="cloud",Ui);function Ui(){}var Vi="MicrosoftApplicationsTelemetryDeviceId",Fi=(Bi.prototype.getSequenceId=function(){return++this._sequenceId},Bi.prototype._saveData=function(e,t){var n=this._propertyStorage;n?n.setProperty(e,t):un(e,t,365)},Bi.prototype._getData=function(e){return this._propertyStorage?this._propertyStorage.getProperty(e)||"":dn(e)},Bi);function Bi(e){this._sequenceId=0,this._propertyStorage=e.propertyStorageOverride,this.seq=this._sequenceId,this.epoch=(new Date).getTime().toString(),!e.disableCookiesUsage&&cn()||this._propertyStorage?(e=(e=this._getData(Vi))||$.newGuid(),this._saveData(Vi,e),this.installId=e):pn(Vi)}var Hi=(zi.acquisitionSpan=864e5,zi.renewalSpan=18e5,zi.cookieUpdateInterval=6e4,zi.cookieNameConst="ai_session",zi);function zi(t,n){var c,l,u;Oe(zi,this,function(o){var e,i={sessionRenewalMs:(e=t).sessionRenewalMs&&function(){return e.sessionRenewalMs},sessionExpirationMs:e.sessionExpirationMs&&function(){return e.sessionExpirationMs},cookieDomain:e.cookieDomain&&function(){return e.cookieDomain},namePrefix:e.namePrefix&&function(){return e.namePrefix},sessionAsGuid:function(){return e.sessionAsGuid},idLength:function(){return e.idLength||22}};function r(e){var t,n,i=o.automaticSession;0<(e=e.split("|")).length&&i.setId(e[0]);try{1<e.length&&(t=+e[1],i.acquisitionDate=+new Date(t),i.acquisitionDate=0<i.acquisitionDate?i.acquisitionDate:0),2<e.length&&(n=+e[2],i.renewalDate=+new Date(n),i.renewalDate=0<i.renewalDate?i.renewalDate:0)}catch(r){l.throwInternal(te.CRITICAL,bt.ErrorParsingAISessionCookie,"Error parsing ai_session cookie, session will be reset: "+r)}0===i.renewalDate&&l.throwInternal(te.WARNING,bt.SessionRenewalDateIsZero,"AI session renewal date is 0, session will be reset.")}function a(){var e=o.automaticSession,t=(new Date).getTime(),n=o.config.sessionAsGuid();!$.isUndefined(n)&&n?$.isBoolean(n)?e.setId(fn()):e.setId(fn(n)):e.setId($.newId(i&&i.idLength?i.idLength():22)),e.acquisitionDate=t,e.renewalDate=t,s(e.getId(),e.acquisitionDate,e.renewalDate),Ln()||l.throwInternal(te.WARNING,bt.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")}function s(e,t,n){var i=t+o.config.sessionExpirationMs(),r=n+o.config.sessionRenewalMs(),a=new Date,n=[e,t,n];i<r?a.setTime(i):a.setTime(r),r=o.config.cookieDomain?o.config.cookieDomain():null,kn(0,u(),n.join("|")+";expires="+a.toUTCString(),r),c=(new Date).getTime()}l=$.isNullOrUndefined(n)?new Ue:n,$.isFunction(t.sessionExpirationMs)||(i.sessionExpirationMs=function(){return zi.acquisitionSpan}),$.isFunction(t.sessionRenewalMs)||(i.sessionRenewalMs=function(){return zi.renewalSpan}),o.config=i,u=function(){return o.config.namePrefix&&o.config.namePrefix()?zi.cookieNameConst+o.config.namePrefix():zi.cookieNameConst},o.automaticSession=new li,o.update=function(){o.automaticSession.getId()||(((i=dn(u()))&&$.isFunction(i.split)||(i=Vn(l,u())))&&r(i),o.automaticSession.getId()||a());var e=o.automaticSession,t=o.config,n=(new Date).getTime(),i=n-e.acquisitionDate>t.sessionExpirationMs(),t=n-e.renewalDate>t.sessionRenewalMs();i||t?a():(!c||zi.cookieUpdateInterval<n-c)&&(e.renewalDate=n,s(e.getId(),e.acquisitionDate,e.renewalDate))},o.backup=function(){var e=(n=o.automaticSession).getId(),t=n.acquisitionDate,n=n.renewalDate;Un(l,u(),[e,t,n].join("|"))}})}var Gi=qt,Wi=(Ki.prototype.getSessionId=function(){var e=this.session;if(e&&Gi(e.customId))return e.customId;var t=this.sessionManager;return t.update(),!(t=t.automaticSession)||(t=t.getId())&&Gi(t)&&(e.automaticId=t),e.automaticId},Ki.prototype.applyApplicationContext=function(e){var t=this.app;Gi(t.id)&&(e.ext[Mi.AppExt][di.id]=t.id),Gi(t.ver)&&(e.ext[Mi.AppExt][di.ver]=t.ver),Gi(t.name)&&(e.ext[Mi.AppExt][di.appName]=t.name),Gi(t.locale)&&(e.ext[Mi.AppExt][di.locale]=t.locale);var n=t.getExpId();Gi(n)&&(e.ext[Mi.AppExt][di.expId]=n),Gi(t.env)&&(e.ext[Mi.AppExt][di.env]=t.env)},Ki.prototype.applyUserContext=function(e){var t=this.user,n=t.getLocalId();Gi(n)&&(e.ext[Mi.UserExt][mi.localId]=n),Gi(t.locale)&&(e.ext[Mi.UserExt][mi.locale]=t.locale),Gi(t.id)&&(e.ext[Mi.UserExt][mi.id]=t.id)},Ki.prototype.applyWebContext=function(e){var t=this.web;Gi(t.domain)&&(e.ext[Mi.WebExt][gi.domain]=t.domain),Gi(t.browser)&&(e.ext[Mi.WebExt][gi.browser]=t.browser),Gi(t.browserVer)&&(e.ext[Mi.WebExt][gi.browserVer]=t.browserVer),Gi(t.screenRes)&&(e.ext[Mi.WebExt][gi.screenRes]=t.screenRes),e.ext[Mi.WebExt][gi.userConsent]=t.getUserConsent(),e.ext[Mi.WebExt][gi.consentDetails]=t.getUserConsentDetails()},Ki.prototype.applyOsContext=function(e){var t=this.os;Gi(t.name)&&(e.ext[Mi.OSExt][yi.osName]=t.name),Gi(t.ver)&&(e.ext[Mi.OSExt][yi.ver]=t.ver)},Ki.prototype.applySdkContext=function(e){var t=this.sdk;e.ext[Mi.SdkExt][Ti.seq]=t.getSequenceId(),e.ext[Mi.SdkExt][Ti.epoch]=t.epoch,Gi(t.installId)&&(e.ext[Mi.SdkExt][Ti.installId]=t.installId)},Ki.prototype.applyIntWebContext=function(e){var t=this.intWeb,n=t.getMsfpc();Gi(n)&&(e.ext[Mi.IntWebExt][Ei.msfpc]=n),n=t.getAnid(),Gi(n)&&(e.ext[Mi.IntWebExt][Ei.anid]=n),Gi(t.serviceName)&&(e.ext[Mi.IntWebExt][Ei.serviceName]=t.serviceName)},Ki.prototype.applyUtcContext=function(e){var t=this.utc;e.ext[Mi.UtcExt][_i.popSample]=t.popSample,0<t.eventFlags&&(e.ext[Mi.UtcExt][_i.eventFlags]=t.eventFlags)},Ki.prototype.applyLocContext=function(e){e.ext[Mi.LocExt][bi.tz]=this.loc.tz},Ki.prototype.applySessionContext=function(e){e.ext[Mi.AppExt][wi.sessionId]=this.getSessionId()},Ki.prototype.applyDeviceContext=function(e){var t=this.device;Gi(t.localId)&&(e.ext[Mi.DeviceExt][Pi.localId]=t.localId),Gi(t.make)&&(e.ext[Mi.DeviceExt][Pi.make]=t.make),Gi(t.model)&&(e.ext[Mi.DeviceExt][Pi.model]=t.model),Gi(t.deviceClass)&&(e.ext[Mi.DeviceExt][Pi.deviceClass]=t.deviceClass)},Ki.prototype.applyCloudContext=function(e){var t=this.cloud;Gi(t.role)&&(e.ext[Mi.CloudExt][Oi.role]=t.role),Gi(t.roleInstance)&&(e.ext[Mi.CloudExt][Oi.roleInstance]=t.roleInstance),Gi(t.roleVer)&&(e.ext[Mi.CloudExt][Oi.roleVer]=t.roleVer)},Ki.prototype.applyAITraceContext=function(e){var t=this.telemetryTrace;Gi(t.traceId)&&(e.ext[Mi.TraceExt][Li.traceId]=t.traceId),Gi(t.name)&&(e.ext[Mi.TraceExt][Li.traceName]=t.name),Gi(t.parentId)&&(e.ext[Mi.TraceExt][Li.parentId]=t.parentId)},Ki);function Ki(e,t,n){this.app=new xn(t),this.cloud=new Pn,this.user=new Bn(e,t,n&&n.logger),this.os=new ni(t),this.web=new Gn(t),this.sdk=new Fi(e),this.intWeb=new ri(t),this.utc=new oi(t),this.loc=new si,this.device=new ci,this.telemetryTrace=new pi(t),this.sessionManager=new Hi(t,n&&n.logger),this.session=new li}var qi,ji=(qi=$e,__extends(Xi,qi),Xi);function Xi(){var a,i=qi.call(this)||this;i.identifier="SystemPropertiesCollector",i.priority=3,i.version="2.4.7";var o={};return Oe(Xi,i,function(r,e){r.initialize=function(e,t,n){qi.prototype.initialize.call(i,e,t,n),a=new Wi(e,r._getTelCtx().getExtCfg(r.identifier),t)},r.processTelemetry=function(e,t){In(e,r.identifier),t=r._getTelCtx(t);var n,i=e.ext=e.ext||{};e.data=e.data||{},i[Mi.AppExt]=i[Mi.AppExt]||{},i[Mi.UserExt]=i[Mi.UserExt]||{},i[Mi.WebExt]=i[Mi.WebExt]||{},i[Mi.OSExt]=i[Mi.OSExt]||{},i[Mi.SdkExt]=i[Mi.SdkExt]||{},i[Mi.IntWebExt]=i[Mi.IntWebExt]||{},i[Mi.UtcExt]=i[Mi.UtcExt]||{},i[Mi.LocExt]=i[Mi.LocExt]||{},i[Mi.DeviceExt]=i[Mi.DeviceExt]||{},i[Mi.TraceExt]=i[Mi.TraceExt]||{},i[Mi.CloudExt]=i[Mi.CloudExt]||{},a.applyApplicationContext(e),a.applyUserContext(e),a.applyWebContext(e),a.applyOsContext(e),a.applySdkContext(e),a.applyIntWebContext(e),a.applyUtcContext(e),a.applyLocContext(e),a.applySessionContext(e),a.applyDeviceContext(e),a.applyAITraceContext(e),a.applyCloudContext(e),Bt(Wt(i),function(e){0===Wt(i[e]).length&&delete i[e]}),n=e.data,o&&Q(o,function(e,t){n[e]||(n[e]=t)}),r.processNext(e,t)},r.getPropertiesContext=function(){return a},r.setProperty=function(e,t){o[e]=t}}),i}var Yi="REAL_TIME",Ji="NEAR_REAL_TIME",Qi="BEST_EFFORT",Zi=($i.create=function(e,t){return new $i(e,t)},$i);function $i(r,e){var a=e?[].concat(e):[],o=$.isNullOrUndefined;Oe($i,this,function(e){e.iKey=function(){return r},e.count=function(){return a.length},e.events=function(){return a},e.addEvents=function(e,t){return void 0===t&&(t=!0),e&&0<e.length?(a=t?a.concat(e):e.concat(a),e.length):0},e.split=function(e,t){var n,i=new $i(r);return e<a.length&&(n=a.length-e,o(t)||(n=t<n?t:n),i.addEvents(a.splice(e,n))),i}})}var er=function Jo(t){Oe(Jo,this,function(g){g.createPayload=function(e,t,n,i){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:n,isBeacon:i}},g.appendPayload=function(p,d,f){var e=p&&d&&!p.overflow;return e&&Ke(t,function(){return"Serializer:appendPayload"},function(){for(var e=d.events(),t=p.payloadBlob,n=p.numEvents,i=!1,r=[],a=p.isBeacon,o=a?65e3:3984588,s=a?65e3:2e6,c=0;c<e.length;){var l=e[c];if(l){if(f<=n){p.overflow=d.split(c);break}var u=g.getEventBlob(l);if(u.length<=s){if(l=u.length,o<t.length+l){p.overflow=d.split(c);break}t&&(t+="\n"),t+=u,i=!0,n++}else r.concat(e.slice(c,1))}c++}r&&0<r.length&&p.sizeExceed.push(Zi.create(d.iKey(),r)),i&&(p.batches.push(d),p.payloadBlob=t,p.numEvents=n,a=d.iKey(),-1===$.arrIndexOf(p.apiKeys,a)&&p.apiKeys.push(a))},function(){return{payload:p,theBatch:{iKey:d.iKey(),evts:d.events()},max:f}}),e},g.getEventBlob=function(a){return Ke(t,function(){return"Serializer.getEventBlob"},function(){var n="data",i="baseData",r={};return r.name=a.name,r.time=a.time,r.ver=a.ver,r.iKey="o:"+tn(a.iKey),a.ext&&(r.ext={},Bt(Wt(a.ext),function(t){r.ext[t]={},Bt(Wt(a.ext[t]),function(e){en(a.ext[t][e])&&(r.ext[t][e]=an(e,a.ext[t][e]).value)})})),r[n]={},r[n][i]={},r[n].baseType=a.baseType,a.baseData&&Bt(Wt(a.baseData),function(e){var t=an(e,a.baseData[e]);tr(r[n][i],e,t),nr(r.ext,i+"."+e,t)}),a.data&&Bt(Wt(a.data),function(e){var t=an(e,a.data[e]);tr(r[n],e,t),nr(r.ext,e,t)}),JSON.stringify(r)},function(){return{item:a}})}})};function tr(e,t,n){if(n){for(var i=e,r=t.split("."),a=0;a<r.length-1;++a)i[r[a]]||(i[r[a]]={}),i=i[r[a]];i[r[r.length-1]]=n.value}}function nr(e,t,n){if(n){var i="metadata",r=sn(n.value,n.kind,n.propertyType);if(-1<r){(a=e)[i]||(a[i]={}),a[i].f||(a[i].f={});for(var a=a[i].f,o=t.split("."),s=0;s<o.length-1;++s)a[o[s]]||(a[o[s]]={f:{}}),a=a[o[s]].f;Jt(n.value)?a[o[o.length-1]]={a:{t:r}}:a[o[o.length-1]]={t:r}}}}var ir=(rr.shouldRetryForStatus=function(e){return!(300<=e&&e<500&&408!==e&&429!==e||501===e||505===e)},rr.getMillisToBackoffForRetry=function(e){var t=2400+Math.floor(1200*Math.random());return Math.min(Math.pow(2,e)*t,6e5)},rr);function rr(){}var ar=function Qo(){var c={};Oe(Qo,this,function(e){e.setKillSwitchTenants=function(e,t){if(e&&t)try{var n=(a=e.split(","),o=[],a&&Bt(a,function(e){o.push(Qt(e))}),o);if("this-request-only"===t)return n;for(var i=1e3*parseInt(t,10),r=0;r<n.length;++r)c[n[r]]=$.dateNow()+i}catch(s){return[]}var a,o;return[]},e.isTenantKilled=function(e){var t=c;return t[e=Qt(e)]!==undefined&&t[e]>$.dateNow()||(delete t[e],!1)}})},or=function Zo(){var t=!0,n=!0,i=!0,r="use-collector-delta",a=!1;Oe(Zo,this,function(e){e.allowRequestSending=function(){return t},e.firstRequestSent=function(){i&&(i=!1,a||(t=!1))},e.shouldAddClockSkewHeaders=function(){return n},e.getClockSkewHeaderValue=function(){return r},e.setClockSkew=function(e){a||(e?(r=e,a=n=!0):n=!1,t=!0)}})},sr="POST",cr="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",lr="drop",ur="kill-duration",pr="time-delta-millis",dr=((pt={})[1]=Gt="requeue",pt[100]=Gt,pt[200]="sent",pt[8004]=lr,pt[8003]=lr,pt);function fr(e){try{return e.responseText}catch(t){}return""}var gr,hr,mr,vr=function $o(E,e,S,_){this._responseHandlers=[];var N,b,x,w="?cors=true&content-type=application/x-json-stream&client-id=NO_AUTH&client-version="+xt,A=new ar,P=!1,D=new or,O=!1,k=0,L=!0,R=[],M={},U=[],V=null,F=!0;Oe($o,this,function(u){var s=!0;function r(e,t,n){var i=new XDomainRequest;i.open(sr,e.urlString),i.onload=function(){var e=fr(i);p(t,200,{},e),l(e)},i.onerror=function(){p(t,400,{})},i.ontimeout=function(){p(t,500,{})},i.onprogress=function(){},n?i.send(e.data):N._setTimeoutOverride(function(){i.send(e.data)},0)}function a(e,i){var t=((t={body:e.data,method:sr})[cr]=!0,t);s&&(t.credentials="include"),e.headers&&0<Wt(e.headers).length&&(t.headers=e.headers),fetch(e.urlString,t).then(function(e){var n={},t="";e.headers&&e.headers.forEach(function(e,t){n[t]=e}),e.body&&e.text().then(function(e){t=e}),p(i,e.status,n,t),l(t)})["catch"](function(e){p(i,0,{})})}function o(t,a,e){function o(e,t,n){return e[n]||!t||!t.getResponseHeader||(t=t.getResponseHeader(n))&&(e[n]=Qt(t)),e}function n(e,t){var n,i,r;p(a,e.status,(r={},(n=e).getAllResponseHeaders?(e=n.getAllResponseHeaders(),i={},qt(e)&&(e=Qt(e).split(/[\r\n]+/),Bt(e,function(e){var t,n;e&&(-1!=(n=e.indexOf(": "))?(t=Qt(e.substring(0,n)).toLowerCase(),n=Qt(e.substring(1+n)),i[t]=n):i[Qt(e)]=1)})),i):(r=o(r,n,pr),r=o(r,n,ur),o(r,n,"kill-duration-seconds"))),t)}var i=new XMLHttpRequest;try{i[cr]=!0}catch(r){}s&&(i.withCredentials=!0),i.open(sr,t.urlString,!e),Bt(Wt(t.headers),function(e){i.setRequestHeader(e,t.headers[e])}),i.onload=function(){var e=fr(i);n(i,e),l(e)},i.onerror=function(){n(i)},i.ontimeout=function(){n(i)},i.send(t.data)}function p(e,t,n,i){try{e(t,n,i)}catch(r){N.diagLog().throwInternal(te.WARNING,bt.SendPostOnCompleteFailure,r)}}function i(){return!P&&k<e}function c(){var e=U;return U=[],e}function d(e,t,n){return e&&0<e.length&&!P&&b&&V&&(t||i()&&(0<n||D.allowRequestSending()))}function f(e){var n={};return e&&Bt(e,function(e,t){n[t]={iKey:e.iKey(),evts:e.events()}}),n}function g(a,o,s,c,l,u){var e;a&&0!==a.length&&(P?C(a,1,c):(e=a,Ke(x,function(){return"HttpManager:_sendBatches"},function(e){e&&(a=a.slice(0));for(var t=[],n=null,i=hn();d(a,c,o);){var r=a.shift();r&&0<r.count()&&(A.isTenantKilled(r.iKey())?t.push(r):(n=n||V.createPayload(o,s,c,u&&h()),V.appendPayload(n,r,E)?null!==n.overflow&&(a=[n.overflow].concat(a),n.overflow=null,v(n,i,hn(),l),i=hn(),n=null):(v(n,i,hn(),l),i=hn(),a=[r].concat(a),n=null)))}n&&v(n,i,hn(),l),0<a.length&&(U=a.concat(U)),C(t,8004,c)},function(){return{batches:f(e),retryCount:o,isTeardown:s,isSynchronous:c,sendReason:l,useSendBeacon:u}},!c)))}function h(){return!L&&O&&nn()}function m(e,t,n){e[t]=e[t]||{},e[t][N.identifier]=n}function v(a,n,o,s){var t,c,l;a&&a.payloadBlob&&0<a.payloadBlob.length&&(t=function(e){var t=w,n="";Bt(e.apiKeys,function(e){0<n.length&&(n+=","),n+=e}),0<n.length&&(t+="&apikey="+n),t+="&upload-time="+$.dateNow().toString(),e=function(e){for(var t=0;t<e.batches.length;t++)for(var n=e.batches[t].events(),i=0;i<n.length;i++){var r=(n[i].ext||{}).intweb||{};if(en(r.msfpc))return encodeURIComponent(r.msfpc)}return""}(e),en(e)&&(t=t+"&ext.intweb.msfpc="+e),D.shouldAddClockSkewHeaders()&&(t+="&time-delta-to-apply-millis="+D.getClockSkewHeaderValue()),!x.getWParam||0<=(e=x.getWParam())&&(t+="&w="+e);for(var i=0;i<R.length;i++)t+="&"+R[i].name+"="+R[i].value;return t}(a),c=hn(),l="sendAttempt",Ke(x,function(){return"HttpManager:_doPayloadSend"},function(){Bt(a.batches,function(e){Bt(e.events(),function(e){var t;F&&(m(t=e.timings=e.timings||{},"sendEventStart",c),m(t,"serializationStart",n),m(t,"serializationCompleted",o)),0<e[l]?e[l]++:e[l]=1})}),C(a.batches,1e3+(s||0),a.isSync,!0);var i={data:a.payloadBlob,urlString:t,headers:M},r=a.payloadBlob=null,e=!!u.sendHook;h()&&a.isBeacon?(e=!1,r=function(e){y(e,a,s),u.sendListener&&u.sendListener(i,e,a.isSync||a.isTeardown,!0)}):b&&(r=function(e){D.firstRequestSent();var t=function(e,t){!function(e,t,n,i){var r=9e3,a=null,o=!1,s=!1;try{var c,l,u=!0;if(typeof e!=wt){if(t&&(D.setClockSkew(t[pr]),c=t[ur]||t["kill-duration-seconds"],Bt(A.setKillSwitchTenants(t["kill-tokens"],c),function(t){Bt(n.batches,function(e){e.iKey()===t&&(a=a||[],e=e.split(0),n.numEvents-=e.count(),a.push(e))})})),200===e)return r=200;(!ir.shouldRetryForStatus(e)||n.numEvents<=0)&&(u=!1),r=9e3+e%1e3}u&&(r=100,l=n.retryCnt,n.isSync||(l<S?T(function(){n.isSync||k--,g(n.batches,l+1,n.isTeardown,n.isSync,5,n.isBeacon)},o=!0,ir.getMillisToBackoffForRetry(l)):s=!0))}finally{o||(D.setClockSkew(),I(n,r,i,s)),C(a,8004,n.isSync)}}(e,t,a,s)};try{b.sendPOST(e,t,a.isTeardown||a.isSync),u.sendListener&&u.sendListener(i,e,a.isSync||a.isTeardown,!1)}catch(n){p(t,0,{})}}),Ke(x,function(){return"HttpManager:_doPayloadSend.sender"},function(){var t,n;r&&(a.isSync||k++,e?(n=!(t={data:i.data,urlString:i.urlString,headers:i.headers}),Ke(x,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{u.sendHook(t,function(e){n=!0,r(e)},a.isSync||a.isTeardown)}catch(e){n||r(i)}})):r(i))}),C(a.sizeExceed,8003,a.isSync)},function(){return{thePayload:a,serializationStart:n,serializationCompleted:o,sendReason:s}},a.isSync))}function y(e,t,n){try{if(nn()){if(B().sendBeacon(e.urlString,e.data))return I(t,200,n,!1),0;var i=null;Bt(t.batches,function(e){i.push(e.split(0))}),I(t,200,n,!1),C(i,8003,t.isSync,!0)}}catch(r){N.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+r)}}function I(e,t,n,i){try{i&&N._backOffTransmission(),200===t&&(i||e.isSync||N._clearBackOff(),r=e.batches,F&&(a=hn(),Bt(r,function(e){var t;e&&0<e.count()&&(e=e.events(),t=a,F&&Bt(e,function(e){m(e.timings=e.timings||{},"sendEventCompleted",t)}))}))),C(e.batches,t,e.isSync,!0)}finally{e.isSync||(k--,5!==n&&u.sendQueuedRequests(n,!e.isSync,e.isBeacon))}var r,a}function T(e,t,n){t?e():N._setTimeoutOverride(e,n)}function l(e){var t=u._responseHandlers;try{for(var n,i=0;i<t.length;i++)try{t[i](e)}catch(r){N.diagLog().throwInternal(te.CRITICAL,bt.PostResponseHandler,"Response handler failed: "+r)}!e||en((n=JSON.parse(e)).webResult)&&en(n.webResult.msfpc)&&un("MSFPC",n.webResult.msfpc,365)}catch(a){}}function C(t,n,i,e){var r,a,o;t&&0<t.length&&_&&(r=_[en(o=dr[a=n])||(o="oth",9e3<=a&&a<=9999?o="rspFail":8e3<=a&&a<=8999?o=lr:1e3<=a&&a<=1999&&(o="send")),o])&&Ke(x,function(){return"HttpManager:_sendBatchesNotification"},function(){T(function(){try{r.call(_,t,n,i)}catch(e){N.diagLog().throwInternal(te.CRITICAL,bt.NotificationException,"send request notification failed: "+e)}},e||i,0)},function(){return{batches:f(t),reason:n,isSync:i,sendSync:e}},!i)}u.initialize=function(e,t,n,i){w=e+w,F=!(x=t).config.disableEventTimings,N=n,V=new er(t),(b=i)||(L=!1,O=!Kt(),(i=H())&&i.protocol&&"file:"==i.protocol.toLowerCase()&&(s=!1),i=null,on()?i=r:Kt()?i=a:"undefined"!=typeof XMLHttpRequest&&(i=o),b={sendPOST:i})},u._getDbgPlgTargets=function(){return[b,A,V]},u.addQueryStringParameter=function(e,t){for(var n=0;n<R.length;n++)if(R[n].name===e)return void(R[n].value=t);R.push({name:e,value:t})},u.addHeader=function(e,t){M[e]=t},u.canSendRequest=function(){return i()&&D.allowRequestSending()},u.sendQueuedRequests=function(e,t,n){t=!$.isNullOrUndefined(t)&&!t,d(U,t,0)&&g(c(),0,!1,t,e||0,!!n)},u.isCompletelyIdle=function(){return!P&&0===k&&0===U.length},u.addBatch=function(e){if(e&&0<e.count()){if(A.isTenantKilled(e.iKey()))return!1;U.push(e)}return!0},u.teardown=function(){0<U.length&&g(c(),0,!0,!0,2,!0)},u.pause=function(){P=!0},u.resume=function(){P=!1,u.sendQueuedRequests(4,!1)},u.sendSynchronousBatch=function(e,t,n){e&&0<e.count()&&g([e],0,!1,!0,t||0,!!n)}})},yr=.25,Ir=500,Tr=20,Cr=6,Er=4,Sr=$t?window:undefined,_r=2,Nr=1,br="eventsDiscarded",xr="overrideInstrumentationKey",wr=(gr=$e,__extends(Ar,gr),Ar);function Ar(){var I,e=gr.call(this)||this;e.identifier="PostChannel",e.priority=1011;var T,C,E,S,_,N=!(e.version="2.4.7"),b=[],x=null,w=!1,A=0,P=1e4,D={},n=Yi,O=null,k=0,L=0,R={},M=-1;return Oe(Ar,e,function(o,s){function r(e,t){if(e.sendAttempt||(e.sendAttempt=0),e.latency||(e.latency=Nt.Normal),e.ext&&e.ext.trace&&delete e.ext.trace,e.ext&&e.ext.user&&e.ext.user.id&&delete e.ext.user.id,e.sync)if(k||w)e.latency=Nt.RealTime,e.sync=!1;else if(C)return C.sendSynchronousBatch(Zi.create(e.iKey,[e]),3),0;var n=!1;A<P?n=!f(e,t):(n=!0,function(e,t){for(var n=Nt.Normal;n<=t;){var i=p(e,t,!0);if(i&&0<i.count()&&0<(i=i.split(0,Tr)).count())return v(br,[i],U.QueueFull),1;n++}}(e.iKey,e.latency)&&(n=!f(e,t))),n&&m(br,[e],U.QueueFull)}function a(e,t,n,i){return e=g(e,t,n),C.sendQueuedRequests(t,n,i),e}function c(){0<=M&&g(M,_,!0)&&C.sendQueuedRequests(_,!0,!1);var e=D[n][1];!O&&!x&&0<=e&&!w&&(0<A?O=l(function(){O=null,a(0===L?Nt.RealTime:Nt.Normal,1,!0),L++,L%=2,c()},e):L=0)}function l(e,t){0===t&&k&&(t=1);var n=1e3;return k&&(n=ir.getMillisToBackoffForRetry(k-1)),o._setTimeoutOverride(e,t*n)}function i(){null!==O&&(o._clearTimeoutOverride(O),O=null,L=0)}function u(e,t){i(),x&&(o._clearTimeoutOverride(x),x=null),w||a(Nt.Normal,e,t,!0)}function p(e,t,n){var i=R[t];return i||(t=Nt.Normal,i=R[t]),!(t=i.iKeyMap[e])&&n&&(t=Zi.create(e),i.batches.push(t),i.iKeyMap[e]=t),t}function d(e,t){C.canSendRequest()&&!k&&(t=0<E&&E<A||t)&&null==x&&o.flush(e,null,20)}function f(e,t){var n=p(e.iKey,e.latency,!0);return n.addEvents([e],t)&&(A++,t&&0===e.sendAttempt&&d(!e.sync,0<S&&n.count()>=S),1)}function g(i,e,t){var r=!1;return!t||C.canSendRequest()?Ke(o.core,function(){return"PostChannel._queueBatches"},function(){for(var t=[],e=Nt.RealTime;i<=e;){var n=R[e];n&&n.batches&&(Bt(n.batches,function(e){C.addBatch(e)?r=r||e&&0<e.count():t=t.concat(e.events()),A-=e.count()}),n.batches=[],n.iKeyMap={}),e--}0<t.length&&m(br,t,U.KillSwitch),r&&i<=M&&(M=-1,_=0)},function(){return{latency:i,sendReason:e}},t):(M=0<=M?Math.min(M,i):i,_=Math.max(_,e)),r}function t(){(D={})[Yi]=[2,1],D[Ji]=[6,3],D[Qi]=[18,9]}function h(e,t){var n=o._notificationManager||{},i=n[e];if(i)try{i.apply(n,t)}catch(r){o.diagLog().throwInternal(te.CRITICAL,bt.NotificationException,e+" notification failed: "+r)}}function m(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];t&&0<t.length&&h(e,[t].concat(n))}function v(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];e&&0<e.length&&Bt(e,function(e){e&&0<e.count()&&h(t,[e.events()].concat(n))})}function y(){S=I&&I.disableAutoBatchFlushLimit?0:Math.max(Ir*(_r+1),P/6)}t(),R[Nt.RealTime]={batches:[],iKeyMap:{}},R[Nt.CostDeferred]={batches:[],iKeyMap:{}},R[Nt.Normal]={batches:[],iKeyMap:{}},y(),C=new vr(Ir,_r,Nr,{requeue:function(e,t){var n=[];Bt(e,function(e){e&&0<e.count()&&Bt(e.events(),function(e){e&&(e.sync&&(e.latency=Nt.RealTime,e.sync=!1),e.sendAttempt<Cr?(In(e,o.identifier),r(e,!1)):n.push(e))})}),0<n.length&&m(br,n,U.NonRetryableStatus)},send:function(e,t,n){e&&0<e.length&&h("eventsSendRequest",[1e3<=t&&t<=1999?t-1e3:0,!0!==n])},sent:function(e,t){v("eventsSent",e,t),c()},drop:function(e,t){v(br,e,8e3<=t&&t<=8999?t-8e3:U.Unknown)},rspFail:function(e){v(br,e,U.NonRetryableStatus),c()},oth:function(e,t){v(br,e,U.Unknown),c()}}),o._getDbgPlgTargets=function(){return[C]},o.initialize=function(i,r,a){Ke(r,function(){return"PostChannel:initialize"},function(){var e=r;s.initialize(i,r,a),o.setInitialized(!1);var t=o._getTelCtx();i.extensionConfig[o.identifier]=i.extensionConfig[o.identifier]||{},I=t.getExtCfg(o.identifier),o._setTimeoutOverride=I.setTimeoutOverride||setTimeout.bind(Sr),o._clearTimeoutOverride=I.clearTimeoutOverride||clearTimeout.bind(Sr);var n=e.getWParam;e.getWParam=function(){var e=0;return I.ignoreMc1Ms0CookieProcessing&&(e|=2),e|n()},0<I.eventsLimitInMem&&(P=I.eventsLimitInMem),0<I.autoFlushEventsLimit&&(E=I.autoFlushEventsLimit),y(),I.httpXHROverride&&I.httpXHROverride.sendPOST&&(T=I.httpXHROverride),en(i.anonCookieName)&&C.addQueryStringParameter("anoncknm",i.anonCookieName),C.sendHook=I.payloadPreprocessor,C.sendListener=I.payloadListener,e=I.overrideEndpointUrl||i.endpointUrl,o._notificationManager=i.extensionConfig.NotificationManager,C.initialize(e,o.core,o,T),yn(function(){u(2,!1)}),o.setInitialized(!0)},function(){return{coreConfig:i,core:r,extensions:a}})},o.processTelemetry=function(e,t){In(e,o.identifier);var n=(t=o._getTelCtx(t)).getExtCfg(o.identifier),i=!!I.disableTelemetry,e=e;(i=n?i||!!n.disableTelemetry:i)||N||(I[xr]&&(e.iKey=I[xr]),n&&n[xr]&&(e.iKey=n[xr]),r(e,!0),c()),o.processNext(e,t)},o.setEventQueueLimits=function(e,t){P=0<e?e:1e4,E=0<t?t:0,y();var n=e<A;if(!n&&0<S)for(var i=Nt.Normal;!n&&i<=Nt.RealTime;i++){var r=R[i];r&&r.batches&&Bt(r.batches,function(e){e&&e.count()>=S&&(n=!0)})}d(!0,n)},o.teardown=function(){u(2,!1),N=!0,C.teardown()},o.pause=function(){i(),w=!0,C.pause()},o.resume=function(){w=!1,C.resume(),c()},o.addResponseHandler=function(e){C._responseHandlers.push(e)},o._loadTransmitProfiles=function(e){i(),t(),n=Yi,c(),Q(e,function(e,t){var n;2<=t.length&&(t.splice(0,t.length-2),t[1]<0&&(t[0]=-1),0<t[1]&&0<t[0]&&(n=t[0]/t[1],t[0]=Math.ceil(n)*t[1]),D[e]=t)})},o.flush=function(e,t,n){void 0===e&&(e=!0),w||(i(),n=n||1,e?(g(Nt.Normal,n,e),null==x?x=l(function(){!function i(e,t){a(Nt.Normal,t,!0),function n(e){C.isCompletelyIdle()?e():x=l(function(){n(e)},yr)}(function(){e&&e(),0<b.length?x=l(function(){return i(b.shift(),t)},0):(x=null,0<A&&c())})}(t,n)},0):b.push(t)):(a(Nt.Normal,n,!1),null!==t&&t!==undefined&&t()))},o.setMsaAuthTicket=function(e){C.addHeader("AuthMsaDeviceTicket",e)},o.hasEvents=function(){return 0<A},o._setTransmitProfile=function(e){n!==e&&D[e]!==undefined&&(i(),n=e,c())},o._backOffTransmission=function(){k<Er&&(k++,i(),c())},o._clearBackOff=function(){k&&(k=0,i(),c())}}),e}(yt=hr={})[yt.LocalStorage=0]="LocalStorage",yt[yt.SessionStorage=1]="SessionStorage",(St=mr=mr||{})[St.Default=0]="Default",St[St.Required=1]="Required",St[St.Array=2]="Array",St[St.Hidden=4]="Hidden",(zt={})[zt.AI=0]="AI",zt[zt.AI_AND_W3C=1]="AI_AND_W3C",zt[zt.W3C=2]="W3C";var Pr=(Dr.sanitizeKeyAndAddUniqueness=function(e,t,n){var i=t.length,r=Dr.sanitizeKey(e,t);if(r.length!==i){for(var a=0,o=r;n[o]!==undefined;)a++,o=r.substring(0,Dr.MAX_NAME_LENGTH-3)+Dr.padNumber(a);r=o}return r},Dr.sanitizeKey=function(e,t){var n;return t&&(t=Dr.trim(t.toString())).length>Dr.MAX_NAME_LENGTH&&(n=t.substring(0,Dr.MAX_NAME_LENGTH),e.throwInternal(te.WARNING,ae.NameTooLong,"name is too long.  It has been truncated to "+Dr.MAX_NAME_LENGTH+" characters.",{name:t},!0)),n||t},Dr.sanitizeString=function(e,t,n){var i;return void 0===n&&(n=Dr.MAX_STRING_LENGTH),t&&(n=n||Dr.MAX_STRING_LENGTH,(t=Dr.trim(t)).toString().length>n&&(i=t.toString().substring(0,n),e.throwInternal(te.WARNING,ae.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),i||t},Dr.sanitizeUrl=function(e,t){return Dr.sanitizeInput(e,t,Dr.MAX_URL_LENGTH,ae.UrlTooLong)},Dr.sanitizeMessage=function(e,t){var n;return t&&t.length>Dr.MAX_MESSAGE_LENGTH&&(n=t.substring(0,Dr.MAX_MESSAGE_LENGTH),e.throwInternal(te.WARNING,ae.MessageTruncated,"message is too long, it has been truncated to "+Dr.MAX_MESSAGE_LENGTH+" characters.",{message:t},!0)),n||t},Dr.sanitizeException=function(e,t){var n;return t&&t.length>Dr.MAX_EXCEPTION_LENGTH&&(n=t.substring(0,Dr.MAX_EXCEPTION_LENGTH),e.throwInternal(te.WARNING,ae.ExceptionTruncated,"exception is too long, it has been truncated to "+Dr.MAX_EXCEPTION_LENGTH+" characters.",{exception:t},!0)),n||t},Dr.sanitizeProperties=function(i,e){var r;return e&&(r={},Q(e,function(e,t){if($.isObject(t)&&N())try{t=b().stringify(t)}catch(n){i.throwInternal(te.WARNING,ae.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:n},!0)}t=Dr.sanitizeString(i,t,Dr.MAX_PROPERTY_LENGTH),e=Dr.sanitizeKeyAndAddUniqueness(i,e,r),r[e]=t}),e=r),e},Dr.sanitizeMeasurements=function(n,e){var i;return e&&(i={},Q(e,function(e,t){e=Dr.sanitizeKeyAndAddUniqueness(n,e,i),i[e]=t}),e=i),e},Dr.sanitizeId=function(e,t){return t&&Dr.sanitizeInput(e,t,Dr.MAX_ID_LENGTH,ae.IdTooLong).toString()},Dr.sanitizeInput=function(e,t,n,i){var r;return t&&(t=Dr.trim(t)).length>n&&(r=t.substring(0,n),e.throwInternal(te.WARNING,i,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),r||t},Dr.padNumber=function(e){return(e="00"+e).substr(e.length-3)},Dr.trim=function(e){return $.isString(e)?e.replace(/^\s+|\s+$/g,""):e},Dr.MAX_NAME_LENGTH=150,Dr.MAX_ID_LENGTH=128,Dr.MAX_PROPERTY_LENGTH=8192,Dr.MAX_STRING_LENGTH=1024,Dr.MAX_URL_LENGTH=2048,Dr.MAX_MESSAGE_LENGTH=32768,Dr.MAX_EXCEPTION_LENGTH=32768,Dr);function Dr(){}var Or=B(),kr=$.isString,Lr=null,Rr=(Mr.createDomEvent=function(e){var t,n=null;return $.isFunction(Event)?n=new Event(e):(t=E())&&t.createEvent&&(n=t.createEvent("Event")).initEvent(e,!0,!0),n},Mr.disableStorage=function(){Mr._canUseLocalStorage=!1,Mr._canUseSessionStorage=!1},Mr._getLocalStorageObject=function(){return Mr.canUseLocalStorage()?Mr._getVerifiedStorageObject(hr.LocalStorage):null},Mr._getVerifiedStorageObject=function(e){var t,n,i=null;try{if($.isNullOrUndefined(y()))return null;n=new Date,(i=I(e===hr.LocalStorage?"localStorage":"sessionStorage")).setItem(n.toString(),n.toString()),t=i.getItem(n.toString())!==n.toString(),i.removeItem(n.toString()),t&&(i=null)}catch(r){i=null}return i},Mr.isInternalApplicationInsightsEndpoint=function(e){return!!~Mr._internalEndpoints.indexOf(e.toLowerCase())},Mr.canUseLocalStorage=function(){return Mr._canUseLocalStorage=Mr._canUseLocalStorage===undefined?!!Mr._getVerifiedStorageObject(hr.LocalStorage):Mr._canUseLocalStorage},Mr.getStorage=function(e,t){var n=Mr._getLocalStorageObject();if(null!==n)try{return n.getItem(t)}catch(i){Mr._canUseLocalStorage=!1,e.throwInternal(te.WARNING,ae.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+Mr.getExceptionName(i),{exception:Mr.dump(i)})}return null},Mr.setStorage=function(e,t,n){var i=Mr._getLocalStorageObject();if(null!==i)try{return i.setItem(t,n),!0}catch(r){Mr._canUseLocalStorage=!1,e.throwInternal(te.WARNING,ae.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+Mr.getExceptionName(r),{exception:Mr.dump(r)})}return!1},Mr.removeStorage=function(e,t){var n=Mr._getLocalStorageObject();if(null!==n)try{return n.removeItem(t),!0}catch(i){Mr._canUseLocalStorage=!1,e.throwInternal(te.WARNING,ae.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+Mr.getExceptionName(i),{exception:Mr.dump(i)})}return!1},Mr._getSessionStorageObject=function(){return Mr.canUseSessionStorage()?Mr._getVerifiedStorageObject(hr.SessionStorage):null},Mr.canUseSessionStorage=function(){return Mr._canUseSessionStorage=Mr._canUseSessionStorage===undefined?!!Mr._getVerifiedStorageObject(hr.SessionStorage):Mr._canUseSessionStorage},Mr.getSessionStorageKeys=function(){var t=[];return Mr.canUseSessionStorage()&&Q(I("sessionStorage"),function(e){t.push(e)}),t},Mr.getSessionStorage=function(e,t){var n=Mr._getSessionStorageObject();if(null!==n)try{return n.getItem(t)}catch(i){Mr._canUseSessionStorage=!1,e.throwInternal(te.WARNING,ae.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+Mr.getExceptionName(i),{exception:Mr.dump(i)})}return null},Mr.setSessionStorage=function(e,t,n){var i=Mr._getSessionStorageObject();if(null!==i)try{return i.setItem(t,n),!0}catch(r){Mr._canUseSessionStorage=!1,e.throwInternal(te.WARNING,ae.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+Mr.getExceptionName(r),{exception:Mr.dump(r)})}return!1},Mr.removeSessionStorage=function(e,t){var n=Mr._getSessionStorageObject();if(null!==n)try{return n.removeItem(t),!0}catch(i){Mr._canUseSessionStorage=!1,e.throwInternal(te.WARNING,ae.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+Mr.getExceptionName(i),{exception:Mr.dump(i)})}return!1},Mr.disableCookies=function(){$.disableCookies()},Mr.canUseCookies=function(e){if($._canUseCookies===undefined){$._canUseCookies=!1;try{$._canUseCookies=Mr.document.cookie!==undefined}catch(t){e.throwInternal(te.WARNING,ae.CannotAccessCookie,"Cannot access document.cookie - "+Mr.getExceptionName(t),{exception:Mr.dump(t)})}}return $._canUseCookies},Mr.disallowsSameSiteNone=function(e){return!(!kr(e)||!~e.indexOf("CPU iPhone OS 12")&&!~e.indexOf("iPad; CPU OS 12")&&!(~e.indexOf("Macintosh; Intel Mac OS X 10_14")&&~e.indexOf("Version/")&&~e.indexOf("Safari"))&&(!~e.indexOf("Macintosh; Intel Mac OS X 10_14")||(t=e.length,"AppleWebKit/605.1.15 (KHTML, like Gecko)"!=e.substring(0<=(n=t-40)?n:0,t)))&&!~e.indexOf("Chrome/5")&&!~e.indexOf("Chrome/6")&&(!~e.indexOf("UnrealEngine")||~e.indexOf("Chrome"))&&!~e.indexOf("UCBrowser/12")&&!~e.indexOf("UCBrowser/11"));var t,n},Mr.setCookie=function(e,t,n,i){var r;Mr.canUseCookies(e)&&(e=r="",i&&(r=";domain="+i),(i=H())&&"https:"===i.protocol&&(e=";secure",(Lr=null===Lr?Mr.disallowsSameSiteNone((B()||{}).userAgent):Lr)||(n+=";SameSite=None")),Mr.document.cookie=t+"="+n+r+";path=/"+e)},Mr.stringToBoolOrDefault=function(e,t){return void 0===t&&(t=!1),e===undefined||null===e?t:"true"==e.toString().toLowerCase()},Mr.getCookie=function(e,t){if(Mr.canUseCookies(e)){var n="";if(t&&t.length)for(var i=t+"=",r=Mr.document.cookie.split(";"),a=0;a<r.length;a++){var o=r[a];if((o=Mr.trim(o))&&!o.indexOf(i)){n=o.substring(i.length,r[a].length);break}}return n}},Mr.deleteCookie=function(e,t){Mr.canUseCookies(e)&&(Mr.document.cookie=t+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},Mr.random32=function(){return $.random32(!0)},Mr.getIEVersion=function(e){return~(e=(e=void 0===e?null:e)?e.toLowerCase():Or?(Or.userAgent||"").toLowerCase():"").indexOf("msie")?parseInt(e.split("msie")[1]):e.indexOf("trident/")&&(e=parseInt(e.split("trident/")[1]))?e+4:null},Mr.msToTimeSpan=function(e){var t=""+(e=Math.round(e=isNaN(e)||e<0?0:e))%1e3,n=""+Math.floor(e/1e3)%60,i=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;return(0<(e=Math.floor(e/864e5))?e+".":"")+(r=r.length<2?"0"+r:r)+":"+i+":"+n+"."+t},Mr.isCrossOriginError=function(e,t,n,i,r){return("Script error."===e||"Script error"===e)&&!r},Mr.dump=function(e){var t=Object[u].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":N()&&(n=b().stringify(e)),t+n},Mr.getExceptionName=function(e){return"[object Error]"===Object[u].toString.call(e)?e.name:""},Mr.addEventHandler=function(e,t){return ie.Attach(C(),e,t)},Mr.IsBeaconApiSupported=function(){return"sendBeacon"in Or&&Or.sendBeacon},Mr.getExtension=function(e,t){for(var n=null,i=0;!n&&i<e.length;)e[i]&&e[i].identifier===t&&(n=e[i]),i++;return n},Mr.document=E()||{},Mr._canUseLocalStorage=undefined,Mr._canUseSessionStorage=undefined,Mr._internalEndpoints=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],Mr.NotSpecified="not_specified",Mr.trim=$.strTrim,Mr.newId=$.newId,Mr.generateW3CId=$.generateW3CId,Mr.isArray=$.isArray,Mr.isError=$.isError,Mr.isDate=$.isDate,Mr.toISOStringForIE8=$.toISOString,Mr);function Mr(){}var Ur=(Vr.parseUrl=function(e){var t=Vr._htmlAnchorIdx,n=Vr._htmlAnchorElement,i=n[t];return Vr.document.createElement?n[t]||(i=n[t]=Vr.document.createElement("a")):i={host:Vr.parseHost(e,!0)},i.href=e,++t>=n.length&&(t=0),Vr._htmlAnchorIdx=t,i},Vr.getAbsoluteUrl=function(e){return(e=Vr.parseUrl(e))?e.href:void 0},Vr.getPathName=function(e){return(e=Vr.parseUrl(e))?e.pathname:void 0},Vr.getCompleteUrl=function(e,t){return e?e.toUpperCase()+" "+t:t},Vr.parseHost=function(e,t){return(e=Vr.parseFullHost(e,t))&&null!=(t=e.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i))&&3<t.length&&kr(t[2])&&0<t[2].length?t[2]+(t[3]||""):e},Vr.parseFullHost=function(e,t){var n=null;return!e||null!=(e=e.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i))&&2<e.length&&kr(e[2])&&0<e[2].length&&(n=e[2]||"",t&&2<e.length&&(t=(e[1]||"").toLowerCase(),e=e[3]||"",n+=e="http"==t&&":80"===e||"https"==t&&":443"===e?"":e)),n},Vr.document=E()||{},Vr._htmlAnchorIdx=0,Vr._htmlAnchorElement=[null,null,null,null,null],Vr);function Vr(){}var Fr=(Br.ParseDependencyPath=function(e,t,n,i){var r,a,o,s=i,c=i,s=t&&0<t.length?(o=(r=Ur.parseUrl(t)).host,s||(null!=r.pathname?("/"!=((a=0===r.pathname.length?"/":r.pathname)[0]||"")&&(a="/"+a),c=r.pathname,Pr.sanitizeString(e,n?n+" "+a:a)):Pr.sanitizeString(e,t))):o=i;return{target:o,name:s,data:c}},Br);function Br(){}var Hr=(zr.Now=function(){var e=_();return e&&e.now&&e.timing&&0<(e=e.now()+e.timing.navigationStart)?e:(new Date).getTime()},zr.GetDuration=function(e,t){return 0===e||0===t||$.isNullOrUndefined(e)||$.isNullOrUndefined(t)?null:t-e},zr);function zr(){}var Gr,pt=(Gr=Gt=function(){},__extends(Wr,Gr),Wr);function Wr(){var e=Gr.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Kr,qr=(Kr=pt,__extends(jr,Kr),jr.envelopeType="Microsoft.ApplicationInsights.{0}.Event",jr.dataType="EventData",jr);function jr(e,t,n,i){var r=Kr.call(this)||this;return r.aiDataContract={ver:mr.Required,name:mr.Required,properties:mr.Default,measurements:mr.Default},r.name=Pr.sanitizeString(e,t)||Rr.NotSpecified,r.properties=Pr.sanitizeProperties(e,n),r.measurements=Pr.sanitizeMeasurements(e,i),r}var Xr,yt=function(){},St=(Xr=Gt,__extends(Yr,Xr),Yr);function Yr(){var e=Xr.call(this)||this;return e.ver=2,e.exceptions=[],e.properties={},e.measurements={},e}var Jr,zt=function(){this.hasFullStack=!0,this.parsedStack=[]},Qr="error",Zr=(Jr=St,__extends($r,Jr),$r.CreateFromInterface=function(t,e,n,i){var r=e.exceptions&&$.arrMap(e.exceptions,function(e){return ta.CreateFromInterface(t,e)});return new $r(t,__assign({},e,{exceptions:r}),n,i)},$r.prototype.toInterface=function(){var e=this.exceptions,t=this.properties,n=this.measurements,i=this.severityLevel;this.ver;var r=this.problemGroup,a=this.id,o=this.isManual;return{ver:"4.0",exceptions:e instanceof Array&&$.arrMap(e,function(e){return e.toInterface()})||undefined,severityLevel:i,properties:t,measurements:n,problemGroup:r,id:a,isManual:o}},$r.CreateSimpleException=function(e,t,n,i,r,a){return{exceptions:[{hasFullStack:!0,message:e,stack:r,typeName:t}]}},$r.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",$r.dataType="ExceptionData",$r);function $r(e,t,n,i,r,a){var o,s=Jr.call(this)||this;return s.aiDataContract={ver:mr.Required,exceptions:mr.Required,severityLevel:mr.Default,properties:mr.Default,measurements:mr.Default},"ver"in(o=t)&&"exceptions"in o&&"properties"in o?(s.exceptions=t.exceptions,s.properties=t.properties,s.measurements=t.measurements,t.severityLevel&&(s.severityLevel=t.severityLevel),t.id&&(s.id=t.id),t.problemGroup&&(s.problemGroup=t.problemGroup),s.ver=2,$.isNullOrUndefined(t.isManual)||(s.isManual=t.isManual)):(s.exceptions=[new ta(e,t)],s.properties=Pr.sanitizeProperties(e,n)||{},s.measurements=Pr.sanitizeMeasurements(e,i),r&&(s.severityLevel=r),a&&(s.id=a)),s}var ea,ta=(ea=zt,__extends(na,ea),na.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&$.arrMap(this.parsedStack,function(e){return e.toInterface()});return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:e||undefined}},na.CreateFromInterface=function(e,t){var n=t.parsedStack instanceof Array&&$.arrMap(t.parsedStack,function(e){return ra.CreateFromInterface(e)})||t.parsedStack;return new na(e,__assign({},t,{parsedStack:n}))},na.parseStack=function(e){if($.isString(e)){for(var t=e.split("\n"),n=[],i=0,r=0,a=0;a<=t.length;a++){var o=t[a];ra.regex.test(o)&&(r+=(o=new ra(t[a],i++)).sizeInBytes,n.push(o))}if(32768<r)for(var s=0,c=n.length-1,l=0,u=s,p=c;s<c;){if(32768<(l+=n[s].sizeInBytes+n[c].sizeInBytes)){n.splice(u,p-u+1);break}u=s,p=c,s++,c--}}return n},na);function na(e,t){var n,i=ea.call(this)||this;return i.aiDataContract={id:mr.Default,outerId:mr.Default,typeName:mr.Required,message:mr.Required,hasFullStack:mr.Default,stack:mr.Default,parsedStack:mr.Array},"hasFullStack"in(n=t)&&"typeName"in n?(i.typeName=t.typeName,i.message=t.message,i.stack=t.stack,i.parsedStack=t.parsedStack,i.hasFullStack=t.hasFullStack):(Rr.isError(n=t)||(n=n[Qr]||n.evt||n),i.typeName=Pr.sanitizeString(e,function(e){var t="";if(e&&!(t=e.typeName||e.name||""))try{var n=/function (.{1,})\(/.exec(e.constructor.toString()),t=n&&1<n.length?n[1]:""}catch(i){}return t}(n))||Rr.NotSpecified,i.message=Pr.sanitizeMessage(e,t.message)||Rr.NotSpecified,t=t.stack,i.parsedStack=na.parseStack(t),i.stack=Pr.sanitizeException(e,t),i.hasFullStack=Rr.isArray(i.parsedStack)&&0<i.parsedStack.length),i}var ia,ra=(ia=yt,__extends(aa,ia),aa.CreateFromInterface=function(e){return new aa(e,null)},aa.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},aa.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,aa.baseSize=58,aa);function aa(e,t){var n,i=ia.call(this)||this;return i.sizeInBytes=0,i.aiDataContract={level:mr.Required,method:mr.Required,assembly:mr.Default,fileName:mr.Default,line:mr.Default},"string"==typeof e?(n=e,i.level=t,i.method="<no_method>",i.assembly=Rr.trim(n),i.fileName="",i.line=0,(n=n.match(aa.regex))&&5<=n.length&&(i.method=Rr.trim(n[2])||i.method,i.fileName=Rr.trim(n[4]),i.line=parseInt(n[5])||0)):(i.level=e.level,i.method=e.method,i.assembly=e.assembly,i.fileName=e.fileName,i.line=e.line,i.sizeInBytes=0),i.sizeInBytes+=i.method.length,i.sizeInBytes+=i.fileName.length,i.sizeInBytes+=i.assembly.length,i.sizeInBytes+=aa.baseSize,i.sizeInBytes+=i.level.toString().length,i.sizeInBytes+=i.line.toString().length,i}var oa,sa,zt=(oa=Gt,__extends(ca,oa),ca);function ca(){var e=oa.call(this)||this;return e.ver=2,e.metrics=[],e.properties={},e.measurements={},e}(yt=sa={})[yt.Measurement=0]="Measurement",yt[yt.Aggregation=1]="Aggregation";var la,ua=(la=function(){this.kind=sa.Measurement},__extends(pa,la),pa);function pa(){var e=la.apply(this,arguments)||this;return e.aiDataContract={name:mr.Required,kind:mr.Default,value:mr.Required,count:mr.Default,min:mr.Default,max:mr.Default,stdDev:mr.Default},e}var da,fa=(da=zt,__extends(ga,da),ga.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",ga.dataType="MetricData",ga);function ga(e,t,n,i,r,a,o,s){var c=da.call(this)||this;c.aiDataContract={ver:mr.Required,metrics:mr.Required,properties:mr.Default};var l=new ua;return l.count=0<i?i:undefined,l.max=isNaN(a)||null===a?undefined:a,l.min=isNaN(r)||null===r?undefined:r,l.name=Pr.sanitizeString(e,t)||Rr.NotSpecified,l.value=n,c.metrics=[l],c.properties=Pr.sanitizeProperties(e,o),c.measurements=Pr.sanitizeMeasurements(e,s),c}var ha,zt=(ha=pt,__extends(ma,ha),ma);function ma(){var e=ha.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var va,ya=(va=zt,__extends(Ia,va),Ia.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",Ia.dataType="PageviewData",Ia);function Ia(e,t,n,i,r,a,o){var s=va.call(this)||this;return s.aiDataContract={ver:mr.Required,name:mr.Default,url:mr.Default,duration:mr.Default,properties:mr.Default,measurements:mr.Default,id:mr.Default},s.id=Pr.sanitizeId(e,o),s.url=Pr.sanitizeUrl(e,n),s.name=Pr.sanitizeString(e,t)||Rr.NotSpecified,isNaN(i)||(s.duration=Rr.msToTimeSpan(i)),s.properties=Pr.sanitizeProperties(e,r),s.measurements=Pr.sanitizeMeasurements(e,a),s}var Ta,pt=(Ta=Gt,__extends(Ca,Ta),Ca);function Ca(){var e=Ta.call(this)||this;return e.ver=2,e.success=!0,e.properties={},e.measurements={},e}var Ea,Sa=(Ea=pt,__extends(_a,Ea),_a.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",_a.dataType="RemoteDependencyData",_a);function _a(e,t,n,i,r,a,o,s,c,l,u,p){void 0===c&&(c="Ajax");var d=Ea.call(this)||this;return d.aiDataContract={id:mr.Required,ver:mr.Required,name:mr.Default,resultCode:mr.Default,duration:mr.Default,success:mr.Default,data:mr.Default,target:mr.Default,type:mr.Default,properties:mr.Default,measurements:mr.Default,kind:mr.Default,value:mr.Default,count:mr.Default,min:mr.Default,max:mr.Default,stdDev:mr.Default,dependencyKind:mr.Default,dependencySource:mr.Default,commandName:mr.Default,dependencyTypeName:mr.Default},d.id=t,d.duration=Rr.msToTimeSpan(r),d.success=a,d.resultCode=o+"",d.type=Pr.sanitizeString(e,c),s=Fr.ParseDependencyPath(e,n,s,i),d.data=Pr.sanitizeUrl(e,i)||s.data,d.target=Pr.sanitizeString(e,s.target),l&&(d.target=d.target+" | "+l),d.name=Pr.sanitizeString(e,s.name),d.properties=Pr.sanitizeProperties(e,u),d.measurements=Pr.sanitizeMeasurements(e,p),d}var Na,Gt=(Na=Gt,__extends(ba,Na),ba);function ba(){var e=Na.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var xa,wa=(xa=Gt,__extends(Aa,xa),Aa.envelopeType="Microsoft.ApplicationInsights.{0}.Message",Aa.dataType="MessageData",Aa);function Aa(e,t,n,i,r){var a=xa.call(this)||this;return a.aiDataContract={ver:mr.Required,message:mr.Required,severityLevel:mr.Default,properties:mr.Default},t=t||Rr.NotSpecified,a.message=Pr.sanitizeMessage(e,t),a.properties=Pr.sanitizeProperties(e,i),a.measurements=Pr.sanitizeMeasurements(e,r),n&&(a.severityLevel=n),a}var Pa,zt=(Pa=zt,__extends(Da,Pa),Da);function Da(){var e=Pa.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Oa,ka,La=(Oa=zt,__extends(Ra,Oa),Ra.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",Ra.dataType="PageviewPerformanceData",Ra);function Ra(e,t,n,i,r,a,o){var s=Oa.call(this)||this;return s.aiDataContract={ver:mr.Required,name:mr.Default,url:mr.Default,duration:mr.Default,perfTotal:mr.Default,networkConnect:mr.Default,sentRequest:mr.Default,receivedResponse:mr.Default,domProcessing:mr.Default,properties:mr.Default,measurements:mr.Default},s.url=Pr.sanitizeUrl(e,n),s.name=Pr.sanitizeString(e,t)||Rr.NotSpecified,s.properties=Pr.sanitizeProperties(e,r),s.measurements=Pr.sanitizeMeasurements(e,a),o&&(s.domProcessing=o.domProcessing,s.duration=o.duration,s.networkConnect=o.networkConnect,s.perfTotal=o.perfTotal,s.receivedResponse=o.receivedResponse,s.sentRequest=o.sentRequest),s}(zt=ka={})[zt.Verbose=0]="Verbose",zt[zt.Information=1]="Information",zt[zt.Warning=2]="Warning",zt[zt.Error=3]="Error",zt[zt.Critical=4]="Critical";var Ma=(Ua.create=function(e,t,n,i,r,a){if(n=Pr.sanitizeString(i,n)||Rr.NotSpecified,$.isNullOrUndefined(e)||$.isNullOrUndefined(t)||$.isNullOrUndefined(n))throw Error("Input doesn't contain all required fields");var o={name:n,time:$.toISOString(new Date),iKey:"",ext:a||{},tags:[],data:{},baseType:t,baseData:e};return $.isNullOrUndefined(r)||Q(r,function(e,t){o.data[e]=t}),o},Ua);function Ua(){}var Va=function es(m,v,t,y){Oe(es,this,function(e){var u,n=$.arrForEach,p=$.isNullOrUndefined,d=null,f=[],g=!1;function h(){t&&n(t.getTransmissionControls(),function(e){n(e,function(e){return e.flush(!0)})})}t&&(u=t.logger),e.trackPageView=function(i,r){var a=i.name;!p(a)&&"string"==typeof a||(e=E(),a=i.name=e&&e.title||"");var e,o=i.uri;if(!p(o)&&"string"==typeof o||(e=H(),o=i.uri=e&&e.href||""),!y.isPerformanceTimingSupported())return m.sendPageViewInternal(i,r),h(),void u.throwInternal(te.WARNING,ae.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var s,t,c=!1,l=y.getPerformanceTiming().navigationStart;0<l&&(s=Hr.GetDuration(l,+new Date),y.shouldCollectDuration(s)||(s=undefined)),p(r)||p(r.duration)||(t=r.duration),!v&&isNaN(t)||(isNaN(t)&&((r=r||{}).duration=s),m.sendPageViewInternal(i,r),h(),c=!0),r=r||{},f.push(t=function(){var e,t=!1;try{y.isPerformanceTimingDataReady()?(t=!0,e={name:a,uri:o},y.populatePageViewPerformanceEvent(e),e.isValid||c?(c||(r.duration=e.durationMs,m.sendPageViewInternal(i,r)),g||(m.sendPageViewPerformanceInternal(e,r),g=!0)):(r.duration=s,m.sendPageViewInternal(i,r))):0<l&&6e4<Hr.GetDuration(l,+new Date)&&(t=!0,c||(r.duration=6e4,m.sendPageViewInternal(i,r)))}catch(n){u.throwInternal(te.CRITICAL,ae.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+Rr.getExceptionName(n),{exception:Rr.dump(n)})}return t}),d=d||setInterval(function(){var e=f.slice(0),t=!1;f=[],n(e,function(e){e()?t=!0:f.push(e)}),0===f.length&&(clearInterval(d),d=null),t&&h()},100)}})},Fa=(Ba.prototype.trackPreviousPageVisit=function(e,t){try{var n=this.restartPageVisitTimer(e,t);n&&this.pageVisitTimeTrackingHandler(n.pageName,n.pageUrl,n.pageVisitTime)}catch(i){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+Rr.dump(i))}},Ba.prototype.restartPageVisitTimer=function(e,t){try{var n=this.stopPageVisitTimer();return this.startPageVisitTimer(e,t),n}catch(i){return this._logger.warnToConsole("Call to restart failed: "+Rr.dump(i)),null}},Ba.prototype.startPageVisitTimer=function(e,t){try{if(Rr.canUseSessionStorage()){if(null!=Rr.getSessionStorage(this._logger,this.prevPageVisitDataKeyName))throw Error("Cannot call startPageVisit consecutively without first calling stopPageVisit");var n=new Ha(e,t),i=b().stringify(n);Rr.setSessionStorage(this._logger,this.prevPageVisitDataKeyName,i)}}catch(r){this._logger.warnToConsole("Call to start failed: "+Rr.dump(r))}},Ba.prototype.stopPageVisitTimer=function(){try{if(Rr.canUseSessionStorage()){var e=$.dateNow(),t=Rr.getSessionStorage(this._logger,this.prevPageVisitDataKeyName);if(t&&N()){var n=b().parse(t);return n.pageVisitTime=e-n.pageVisitStartTime,Rr.removeSessionStorage(this._logger,this.prevPageVisitDataKeyName),n}return null}return null}catch(i){return this._logger.warnToConsole("Stop page visit timer failed: "+Rr.dump(i)),null}},Ba);function Ba(e,t){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=t,this._logger=e}var Ha=function(e,t){this.pageVisitStartTime=$.dateNow(),this.pageName=e,this.pageUrl=t},za=(Ga.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var t,n,i,r,a=this.getPerformanceNavigationTiming(),o=this.getPerformanceTiming();(a||o)&&(o=a?(t=a.duration,n=Hr.GetDuration(a.startTime,a.connectEnd),i=Hr.GetDuration(a.requestStart,a.responseStart),r=Hr.GetDuration(a.responseStart,a.responseEnd),Hr.GetDuration(a.responseEnd,a.loadEventEnd)):(t=Hr.GetDuration(o.navigationStart,o.loadEventEnd),n=Hr.GetDuration(o.navigationStart,o.connectEnd),i=Hr.GetDuration(o.requestStart,o.responseStart),r=Hr.GetDuration(o.responseStart,o.responseEnd),Hr.GetDuration(o.responseEnd,o.loadEventEnd)),0===t?this._logger.throwInternal(te.WARNING,ae.ErrorPVCalc,"error calculating page view performance.",{total:t,network:n,request:i,response:r,dom:o}):this.shouldCollectDuration(t,n,i,r,o)?t<Math.floor(n)+Math.floor(i)+Math.floor(r)+Math.floor(o)?this._logger.throwInternal(te.WARNING,ae.ClientPerformanceMathError,"client performance math error.",{total:t,network:n,request:i,response:r,dom:o}):(e.durationMs=t,e.perfTotal=e.duration=Rr.msToTimeSpan(t),e.networkConnect=Rr.msToTimeSpan(n),e.sentRequest=Rr.msToTimeSpan(i),e.receivedResponse=Rr.msToTimeSpan(r),e.domProcessing=Rr.msToTimeSpan(o),e.isValid=!0):this._logger.throwInternal(te.WARNING,ae.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:t,network:n,request:i,response:r,dom:o}))},Ga.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?_().timing:null},Ga.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?_().getEntriesByType("navigation")[0]:null},Ga.prototype.isPerformanceNavigationTimingSupported=function(){var e=_();return e&&e.getEntriesByType&&0<e.getEntriesByType("navigation").length},Ga.prototype.isPerformanceTimingSupported=function(){var e=_();return e&&e.timing},Ga.prototype.isPerformanceTimingDataReady=function(){var e=_();return(e=e?e.timing:0)&&0<e.domainLookupStart&&0<e.navigationStart&&0<e.responseStart&&0<e.requestStart&&0<e.loadEventEnd&&0<e.responseEnd&&0<e.connectEnd&&0<e.domLoading},Ga.prototype.shouldCollectDuration=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=["googlebot","adsbot-google","apis-google","mediapartners-google"],i=(B()||{}).userAgent,r=!1;if(i)for(var a=0;a<n.length;a++)r=r||!!~i.toLowerCase().indexOf(n[a]);if(r)return!1;for(a=0;a<e.length;a++)if(e[a]<0||e[a]>=this.MAX_DURATION_ALLOWED)return!1;return!0},Ga);function Ga(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}var Wa="duration";function Ka(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}var qa,zt=(qa=$e,__extends(ja,qa),ja.getDefaultConfig=function(e){return(e=e||{}).sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.disableExceptionTracking=Rr.stringToBoolOrDefault(e.disableExceptionTracking),e.autoTrackPageVisitTime=Rr.stringToBoolOrDefault(e.autoTrackPageVisitTime),e.overridePageViewDuration=Rr.stringToBoolOrDefault(e.overridePageViewDuration),e.enableUnhandledPromiseRejectionTracking=Rr.stringToBoolOrDefault(e.enableUnhandledPromiseRejectionTracking),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||100<=e.samplingPercentage)&&(e.samplingPercentage=100),e.isCookieUseDisabled=Rr.stringToBoolOrDefault(e.isCookieUseDisabled),e.isStorageUseDisabled=Rr.stringToBoolOrDefault(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=Rr.stringToBoolOrDefault(e.isBrowserLinkTrackingEnabled),e.enableAutoRouteTracking=Rr.stringToBoolOrDefault(e.enableAutoRouteTracking),e.namePrefix=e.namePrefix||"",e},ja.prototype.processTelemetry=function(a,o){var s=this;Ke(this.core,function(){return s.identifier+":processTelemetry"},function(){var e=!1,t=s._telemetryInitializers.length;o=s._getTelCtx(o);for(var n=0;n<t;++n){var i=s._telemetryInitializers[n];if(i)try{if(!1===i.call(null,a)){e=!0;break}}catch(r){o.diagLog().throwInternal(te.CRITICAL,ae.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+Rr.getExceptionName(r),{exception:Rr.dump(r)},!0)}}e||s.processNext(a,o)},function(){return{item:a}},!a.sync)},ja.prototype.trackEvent=function(e,t){try{var n=Ma.create(e,qr.dataType,qr.envelopeType,this.diagLog(),t);this.core.track(n)}catch(i){this.diagLog().throwInternal(te.WARNING,ae.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+Rr.getExceptionName(i),{exception:Rr.dump(i)})}},ja.prototype.startTrackEvent=function(e){try{this._eventTracking.start(e)}catch(t){this.diagLog().throwInternal(te.CRITICAL,ae.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+Rr.getExceptionName(t),{exception:Rr.dump(t)})}},ja.prototype.stopTrackEvent=function(e,t,n){try{this._eventTracking.stop(e,undefined,t)}catch(i){this.diagLog().throwInternal(te.CRITICAL,ae.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+Rr.getExceptionName(i),{exception:Rr.dump(i)})}},ja.prototype.trackTrace=function(e,t){try{var n=Ma.create(e,wa.dataType,wa.envelopeType,this.diagLog(),t);this.core.track(n)}catch(i){this.diagLog().throwInternal(te.WARNING,ae.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+Rr.getExceptionName(i),{exception:Rr.dump(i)})}},ja.prototype.trackMetric=function(e,t){try{var n=Ma.create(e,fa.dataType,fa.envelopeType,this.diagLog(),t);this.core.track(n)}catch(i){this.diagLog().throwInternal(te.CRITICAL,ae.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+Rr.getExceptionName(i),{exception:Rr.dump(i)})}},ja.prototype.trackPageView=function(e,t){try{var n=e||{};this._pageViewManager.trackPageView(n,__assign({},n.properties,n.measurements,t)),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(n.name,n.uri)}catch(i){this.diagLog().throwInternal(te.CRITICAL,ae.TrackPVFailed,"trackPageView failed, page view will not be collected: "+Rr.getExceptionName(i),{exception:Rr.dump(i)})}},ja.prototype.sendPageViewInternal=function(e,t,n){var i=E();i&&(e.refUri=e.refUri===undefined?i.referrer:e.refUri),n=Ma.create(e,ya.dataType,ya.envelopeType,this.diagLog(),t,n),this.core.track(n),this._trackAjaxAttempts=0},ja.prototype.sendPageViewPerformanceInternal=function(e,t,n){n=Ma.create(e,La.dataType,La.envelopeType,this.diagLog(),t,n),this.core.track(n)},ja.prototype.trackPageViewPerformance=function(e,t){try{this._pageViewPerformanceManager.populatePageViewPerformanceEvent(e),this.sendPageViewPerformanceInternal(e,t)}catch(n){this.diagLog().throwInternal(te.CRITICAL,ae.TrackPVFailed,"trackPageViewPerformance failed, page view will not be collected: "+Rr.getExceptionName(n),{exception:Rr.dump(n)})}},ja.prototype.startTrackPage=function(e){try{var t;"string"!=typeof e&&(e=(t=E())&&t.title||""),this._pageTracking.start(e)}catch(n){this.diagLog().throwInternal(te.CRITICAL,ae.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+Rr.getExceptionName(n),{exception:Rr.dump(n)})}},ja.prototype.stopTrackPage=function(e,t,n,i){try{var r,a;"string"!=typeof e&&(e=(r=E())&&r.title||""),"string"!=typeof t&&(t=(a=H())&&a.href||""),this._pageTracking.stop(e,t,n,i),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(e,t)}catch(o){this.diagLog().throwInternal(te.CRITICAL,ae.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+Rr.getExceptionName(o),{exception:Rr.dump(o)})}},ja.prototype.sendExceptionInternal=function(e,t,n){e=new Zr(this.diagLog(),e.exception||Error(Rr.NotSpecified),e.properties,e.measurements,e.severityLevel,e.id).toInterface(),n=Ma.create(e,Zr.dataType,Zr.envelopeType,this.diagLog(),t,n),this.core.track(n)},ja.prototype.trackException=function(e,t){try{this.sendExceptionInternal(e,t)}catch(n){this.diagLog().throwInternal(te.CRITICAL,ae.TrackExceptionFailed,"trackException failed, exception will not be collected: "+Rr.getExceptionName(n),{exception:Rr.dump(n)})}},ja.prototype._onerror=function(e){try{var t,n={url:e&&e.url||(E()||{}).URL,lineNumber:e.lineNumber,columnNumber:e.columnNumber,message:e.message};Rr.isCrossOriginError(e.message,e.url,e.lineNumber,e.columnNumber,e.error)?this._sendCORSException(n.url):(Rr.isError(e.error)||(t="window.onerror@"+n.url+":"+e.lineNumber+":"+(e.columnNumber||0),e.error=Error(e.message),e.error.stack=t),this.trackException({exception:e.error,severityLevel:ka.Error},n))}catch(i){e=e.error?e.error.name+", "+e.error.message:"null",this.diagLog().throwInternal(te.CRITICAL,ae.ExceptionWhileLoggingError,"_onError threw exception while logging error, error will not be collected: "+Rr.getExceptionName(i),{exception:Rr.dump(i),errorString:e})}},ja.prototype.addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},ja.prototype.initialize=function(e,t,n,i){var a=this;if(!this.isInitialized()){if($.isNullOrUndefined(t))throw Error("Error initializing");qa.prototype.initialize.call(this,e,t,n,i),this.setInitialized(!1);var r=this._getTelCtx(),o=this.identifier;this._globalconfig={instrumentationKey:e.instrumentationKey,endpointUrl:e.endpointUrl||"https://dc.services.visualstudio.com/v2/track"},this.config=r.getExtCfg(o),(t=ja.getDefaultConfig())!==undefined&&(Q(t,function(e,t){a.config[e]=r.getConfig(o,e,t)}),this._globalconfig&&Q(t,function(e,t){a._globalconfig[e]===undefined&&(a._globalconfig[e]=t)})),this.config.isCookieUseDisabled&&Rr.disableCookies(),this.config.isStorageUseDisabled&&Rr.disableStorage(),i={instrumentationKey:function(){return e.instrumentationKey},accountId:function(){return a.config.accountId||e.accountId},sessionRenewalMs:function(){return a.config.sessionRenewalMs||e.sessionRenewalMs},sessionExpirationMs:function(){return a.config.sessionExpirationMs||e.sessionExpirationMs},sampleRate:function(){return a.config.samplingPercentage||e.samplingPercentage},cookieDomain:function(){return a.config.cookieDomain||e.cookieDomain},sdkExtension:function(){return a.config.sdkExtension||e.sdkExtension},isBrowserLinkTrackingEnabled:function(){return a.config.isBrowserLinkTrackingEnabled||e.isBrowserLinkTrackingEnabled},appId:function(){return a.config.appId||e.appId}},this._pageViewPerformanceManager=new za(this.core),this._pageViewManager=new Va(this,this.config.overridePageViewDuration,this.core,this._pageViewPerformanceManager),this._pageVisitTimeManager=new Fa(this.diagLog(),function(e,t,n){return a.trackPageVisitTime(e,t,n)}),this._telemetryInitializers=this._telemetryInitializers||[],this._addDefaultTelemetryInitializers(i),this._eventTracking=new Xa(this.diagLog(),"trackEvent"),this._eventTracking.action=function(e,t,n,i){(i=i||{})[Wa]=n.toString(),a.trackEvent({name:e,properties:i})},this._pageTracking=new Xa(this.diagLog(),"trackPageView"),this._pageTracking.action=function(e,t,n,i,r){(i=$.isNullOrUndefined(i)?{}:i)[Wa]=n.toString(),a.sendPageViewInternal({name:e,uri:t,properties:i,measurements:r},i)};var s,c,l,u,p,d=C(),t=typeof history===h&&history?history:I("history"),f=H(),g=this;!1===this.config.disableExceptionTracking&&!this.config.autoExceptionInstrumented&&d&&(s=d.onerror,d.onerror=function(e,t,n,i,r){var a=s&&s(e,t,n,i,r);return!0!==a&&g._onerror({message:e,url:t,lineNumber:n,columnNumber:i,error:r}),a},this.config.autoExceptionInstrumented=!0),!1===this.config.disableExceptionTracking&&!0===this.config.enableUnhandledPromiseRejectionTracking&&!this.config.autoUnhandledPromiseInstrumented&&d&&(c=d[i="onunhandledrejection"],d[i]=function(e){var t=c&&c.call(d,e);return!0!==t&&g._onerror({message:e.reason.toString(),error:e.reason instanceof Error?e.reason:Error(e.reason.toString()),url:f?f.href:"",lineNumber:0,columnNumber:0}),t},this.config.autoUnhandledPromiseInstrumented=!0),!0===this.config.enableAutoRouteTracking&&t&&$.isFunction(t.pushState)&&$.isFunction(t.replaceState)&&d&&"undefined"!=typeof Event&&(l=this,$.arrForEach(n,function(e){"AppInsightsPropertiesPlugin"===e.identifier&&(a._properties=e)}),t.pushState=(p=t.pushState,function(){var e=p.apply(this,arguments);return Ka(d,Rr.createDomEvent(l.config.namePrefix+"pushState")),Ka(d,Rr.createDomEvent(l.config.namePrefix+"locationchange")),e}),t.replaceState=(u=t.replaceState,function(){var e=u.apply(this,arguments);return Ka(d,Rr.createDomEvent(l.config.namePrefix+"replaceState")),Ka(d,Rr.createDomEvent(l.config.namePrefix+"locationchange")),e}),d.addEventListener&&(d.addEventListener(l.config.namePrefix+"popstate",function(){Ka(d,Rr.createDomEvent(l.config.namePrefix+"locationchange"))}),d.addEventListener(l.config.namePrefix+"locationchange",function(){l._properties&&l._properties.context&&l._properties.context.telemetryTrace&&(l._properties.context.telemetryTrace.traceID=Rr.generateW3CId(),l._properties.context.telemetryTrace.name=f&&f.pathname||"_unknown_"),a._currUri&&(a._prevUri=a._currUri),a._currUri=f&&f.href||"",setTimeout((function(e){l.trackPageView({refUri:e,properties:{duration:0}})}).bind(a,a._prevUri),l.autoRoutePVDelay)}))),this.setInitialized(!0)}},ja.prototype.trackPageVisitTime=function(e,t,n){this.trackMetric({name:"PageVisitTime",average:n,max:n,min:n,sampleCount:1},{PageName:e,PageUrl:t})},ja.prototype._addDefaultTelemetryInitializers=function(e){var i;e.isBrowserLinkTrackingEnabled()||(i=["/browserLinkSignalR/","/__browserLink/"],this._addTelemetryInitializer(function(e){if(e.baseType===Sa.dataType){var t=e.baseData;if(t)for(var n=0;n<i.length;n++)if(t.target&&~t.target.indexOf(i[n]))return!1}return!0}))},ja.prototype._addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},ja.prototype._sendCORSException=function(e){var t={message:"Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",url:e,lineNumber:0,columnNumber:0,error:undefined},e=Ma.create(t,Zr.dataType,Zr.envelopeType,this.diagLog(),{url:e});this.core.track(e)},ja.Version="2.5.11",ja);function ja(){var e=qa.call(this)||this;e.identifier="ApplicationInsightsAnalytics",e.priority=180,e.autoRoutePVDelay=500,e._trackAjaxAttempts=0;var t=H();return e._prevUri=t&&t.href||"",e}var Xa=(Ya.prototype.start=function(e){"undefined"!=typeof this._events[e]&&this._logger.throwInternal(te.WARNING,ae.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:this._name,key:e},!0),this._events[e]=+new Date},Ya.prototype.stop=function(e,t,n,i){var r=this._events[e];isNaN(r)?this._logger.throwInternal(te.WARNING,ae.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:this._name,key:e},!0):(r=Hr.GetDuration(r,+new Date),this.action(e,t,r,n,i)),delete this._events[e],this._events[e]=undefined},Ya);function Ya(e,t){this._name=t,this._events={},this._logger=e}function Ja(n){Q(n,function(e,t){en(t)&&("{}"!==JSON.stringify(t)||"callback"===e)||delete n[e]})}function Qa(e,t,n){var i=e;if(i){for(;!t(i,n);)if(!(i=i.parentNode)||!i.getAttribute)return null;return i}}function Za(e){return"A"===e.nodeName}function $a(e,t){return en(eo(e,t))}function eo(e,t){return Qa(e,to,t)}function to(e,t){return en(t=e.getAttribute(t))||""===t}function no(e){return"["+e+"]"}function io(n,i,r,a){var o;return function(){var e=arguments,t=!o;clearTimeout(o),o=setTimeout(function(){o=0,i&&i.apply(a,e)},r),t&&n&&n.apply(a,e)}}function ro(){var e=C(),t=E();return t&&e?{h:parseInt(t.body.scrollLeft||t.documentElement.scrollLeft||e.pageXOffset,10),v:parseInt(t.body.scrollTop||t.documentElement.scrollTop||e.pageYOffset,10)}:{h:0,v:0}}function ao(){var e,t={h:0,w:0},n=C(),i=E();return n&&i&&n.screen&&(e=i.body||{},i=i.documentElement||{},t.h=n.innerHeight||e.clientHeight||i.clientHeight,t.w=n.innerWidth||e.clientWidth||i.clientWidth),t}var oo,so={CLICKLEFT:"CL",CLICKRIGHT:"CR",CLICKMIDDLE:"CM",SCROLL:"S",ZOOM:"Z",RESIZE:"R",KEYBOARDENTER:"KE",KEYBOARDSPACE:"KS",OTHER:"O"};($e=oo={})[$e.PAGE_ACTION=0]="PAGE_ACTION",$e[$e.CONTENT_UPDATE=1]="CONTENT_UPDATE";var co={BUTTON:!0,CHECKBOX:!0,RADIO:!0,RESET:!0,SUBMIT:!0};function lo(e){if(e&&e.attributes)try{var t=e.getAttribute("data-dc");return en(t)&&"pii"==t.toLowerCase()}catch(n){return}}function uo(e,t){var n,i="",r={},a=[],o=e.cookiesToCollect;!1===e.shareAuthStatus?a=o:Bt(o,function(e){"ANON"!==e&&a.push(e)});try{try{$t&&window.varCustomerCookies&&0<window.varCustomerCookies.length&&(a=a.concat(window.varCustomerCookies))}catch(s){t.throwInternal(te.CRITICAL,bt.FailedToGetCookies,"Failed to get cookies ")}Bt(a,function(e){r.hasOwnProperty(e)||(r[e]="",Zt&&""!==(n=decodeURIComponent(document.cookie.replace(RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")))&&(i+=e+"="+n+";"))})}catch(s){t.throwInternal(te.CRITICAL,bt.FailedToGetCookies,"Failed to get cookies ")}return i}function po(t){!function n(e){var t=E()||{};/in/.test(t.readyState)?setTimeout(function(){n(e)},100):e.call()}(function(){var e;Zt&&"complete"===document.readyState?t():(e=C())&&(e.addEventListener?e.addEventListener("load",function(){t()}):e.attachEvent&&e.attachEvent("onload",function(){t()}))})}var fo={longNames:{isShortNames:!1,id:"data-bi-id",areaName:"data-bi-area",slotNumber:"data-bi-slot",contentName:"data-bi-name",contentSource:"data-bi-source",templateName:"data-bi-view",productId:"data-bi-product",contentType:"data-bi-type",parentId:"data-bi-parentid",parentName:"data-bi-parentname"},shortNames:{isShortNames:!0,id:"data-bi-id",areaName:"data-bi-an",slotNumber:"data-bi-sn",contentName:"data-bi-cn",contentSource:"data-bi-cs",templateName:"data-bi-tn",productId:"data-bi-pid",contentType:"data-bi-ct",parentId:"data-bi-pi",parentName:"data-bi-pn"}},go={parentId:"parentId",parentName:"parentName"},ho={parentId:"pI",parentName:"pN"},mo=(vo.prototype.getMetadata=function(){var e={},t={};return Zt&&(t=this._getMetaDataFromDOM("awa-",!0),e=this._getMetaDataFromDOM("ms.",!1)),gn(!0,t,e)},vo.prototype.getVisibleContent=function(){var e,t,n,i,r,a,o,s,c=ao(),l={top:0,bottom:c.h,left:0,right:c.w},u=null,p=[];if(u=Zt?document.querySelectorAll(no(this._contentBlobFieldNames.areaName)+","+no(this._contentBlobFieldNames.slotNumber)+","+no(this._config.biBlobAttributeTag)):u)for(var d=0;d<u.length;d++){var f=u[d];$a(f,"data-bi-dnt")||(t=l,0,!(0<(r=(n=(e=f).getBoundingClientRect()).left,a=n.top,o=n.right,e=n.bottom,t=(i=t).left,s=i.top,n=i.right,i=i.bottom,Math.max(0,Math.min(o,n)-Math.max(r,t))*Math.max(0,Math.min(e,i)-Math.max(a,s)))))||(f=this.getElementContent(f,oo.CONTENT_UPDATE))&&p.push(f)}return p},vo.prototype.getElementContent=function(e,t){if(!e)return{};var n,i,r,a={};if(this._isTracked(e))if(this._isTrackedWithDataM(e)){i=(n=e).getAttribute(this._config.biBlobAttributeTag);try{a=JSON.parse(i)}catch(o){this._traceLogger.throwInternal(te.CRITICAL,bt.CannotParseBiBlobValue,"Can not parse "+i)}}else this._isTrackedWithDataBi(e)&&(a=gn(a,this._populateElementContentwithDataBi(r=e,e)));else if(i=(n=eo(e,this._config.biBlobAttributeTag))?n.getAttribute(this._config.biBlobAttributeTag):i)try{a=JSON.parse(i)}catch(o){this._traceLogger.throwInternal(te.CRITICAL,bt.CannotParseBiBlobValue,"Can not parse "+i)}else r=Qa(e,this._isTrackedWithDataBi),a=gn(a,this._populateElementContentwithDataBi(r,e));return Ja(a),this._config.autoCapture.lineage&&t==oo.PAGE_ACTION&&(a=gn(a,this.getLineageDetails(e))),this._config.autoPopulateParentIdAndParentName?gn(a,this._getParentDetails(n||r,a)):a},vo.prototype._populateElementContentwithDataBi=function(e,t){var n={};if(!e){if(!this._config.useDefaultContentName)return n;e=t}var i=eo(e,this._contentBlobFieldNames.areaName),r=gn({},this._getAreaContent(i)),t=this._config.callback.contentName?this._config.callback.contentName(e,this._config.useDefaultContentName):"",i=this._getDefaultContentName(e,this._config.useDefaultContentName);(n={id:e.getAttribute(this._contentBlobFieldNames.id)||e.id||"",aN:r.areaName,sN:e.getAttribute(this._contentBlobFieldNames.slotNumber),cN:t||e.getAttribute(this._contentBlobFieldNames.contentName)||i||e.getAttribute("alt")||"",cS:e.getAttribute(this._contentBlobFieldNames.contentSource)||r.contentSource,tN:r.templateName,pid:e.getAttribute(this._contentBlobFieldNames.productId),cT:e.getAttribute(this._contentBlobFieldNames.contentType)||r.type,pI:e.getAttribute(this._contentBlobFieldNames.parentId),pN:e.getAttribute(this._contentBlobFieldNames.parentName)}).id&&n.aN&&n.sN&&n.cN||this._traceLogger.throwInternal(te.WARNING,bt.InvalidContentBlob,"Invalid content blob.  Missing required attributes (id, aN/area, sN/slot), cN/contentName.  Content information will still be collected!"),this._contentBlobFieldNames.isShortNames||(n={contentId:n.id,areaName:n.aN,slotNumber:n.sN,contentName:n.cN,contentSource:n.cS,templateName:n.tN,productId:n.pid,contentType:n.cT,parentId:n.pI,parentName:n.pN});for(var a,o=0;o<e.attributes.length;o++)(a=e.attributes[o]).name!==this._contentBlobFieldNames.id&&a.name!==this._contentBlobFieldNames.areaName&&a.name!==this._contentBlobFieldNames.slotNumber&&a.name!==this._contentBlobFieldNames.contentName&&a.name!==this._contentBlobFieldNames.contentSource&&a.name!==this._contentBlobFieldNames.templateName&&a.name!==this._contentBlobFieldNames.productId&&a.name!==this._contentBlobFieldNames.contentType&&a.name!==this._contentBlobFieldNames.parentId&&a.name!==this._contentBlobFieldNames.parentName&&~a.name.indexOf("data-bi-")&&(n[a.name.replace("data-bi-","")]=a.value);return n},vo.prototype.getLineageDetails=function(e){for(var t,n,i=[],r=[],a=this._config.biBlobAttributeTag,o="data-module-id",s=undefined;e;){var c=e.getAttribute(a)||e[a],l=e.getAttribute(o)||e[o];if(c){try{var u=JSON.parse(c)}catch(p){this._traceLogger.throwInternal(te.CRITICAL,bt.CannotParseDataAttribute,"Can not parse "+c)}u&&(t=u.cN||u.cT,n=u.id||undefined,(t||n)&&(i.push(t),l&&(s=t),r.push(n)))}else t=e.getAttribute(this._contentBlobFieldNames.contentName)||e.getAttribute(this._contentBlobFieldNames.contentType),n=e.getAttribute(this._contentBlobFieldNames.id)||undefined,(t||n)&&(i.push(t),l&&(s=t),r.push(n));e=e.parentElement}return{lineage:i.join(">"),lineageById:r.join(">"),lineageContainerName:s}},vo.prototype._getMetaDataFromDOM=function(e,t){var n={};if(Zt)for(var i=document.querySelectorAll("meta"),r=0;r<i.length;r++){var a=i[r];a.name&&(a.name.toLowerCase().indexOf(e)||(n[t?a.name.replace(e,""):a.name]=a.content))}return n},vo.prototype._getAreaContent=function(e){if(e)return{areaName:e.getAttribute(this._contentBlobFieldNames.areaName),templateName:e.getAttribute(this._contentBlobFieldNames.templateName),contentSource:e.getAttribute(this._contentBlobFieldNames.contentSource),product:e.getAttribute(this._contentBlobFieldNames.productId),type:e.getAttribute(this._contentBlobFieldNames.contentType)}},vo.prototype._getDefaultContentName=function(e,t){if(!1===t||lo(e)||!e.tagName)return"";var n,i=E()||{};switch(e.tagName){case"A":n=i.all?e.innerText||e.innerHTML:e.text||e.innerHTML;break;case"IMG":case"AREA":n=e.alt;break;default:n=e.value||e.name||e.alt||e.innerText||e.id}return n.substring(0,200)},vo.prototype._getParentDetails=function(e,t){var n=(this._contentBlobFieldNames.isShortNames?ho:go).parentId,i=(this._contentBlobFieldNames.isShortNames?ho:go).parentName,r=t[n],t=t[i];return r||t||!e?{}:this._populateParentInfo(e,n,i)},vo.prototype._isTrackedWithDataM=function(e){for(var t=e.attributes,n=0;n<t.length;n++)if(~t[n].name.indexOf("data-m"))return!0;return!1},vo.prototype._isTrackedWithDataBi=function(e){for(var t=e.attributes,n=0;n<t.length;n++)if(~t[n].name.indexOf("data-bi-"))return!0;return!1},vo.prototype._isTracked=function(e){for(var t=e.attributes,n=0;n<t.length;n++)if(~t[n].name.indexOf("data-m")||~t[n].name.indexOf("data-bi-"))return!0;return!1},vo.prototype._populateParentInfo=function(e,t,n){var i,r,a={},o=this._config.biBlobAttributeTag,s=Qa(e.parentElement,this._isTracked);if(s){if(o=s.getAttribute(o)||e[o]){try{var c=JSON.parse(o)}catch(l){this._traceLogger.throwInternal(te.CRITICAL,bt.CannotParseDataAttribute,"Can not parse "+o)}c&&(i=c.id,r=c.cN)}else i=s.getAttribute(this._contentBlobFieldNames.id),r=s.getAttribute(this._contentBlobFieldNames.contentName);i&&(a[t]=i),r&&(a[n]=r)}return a},vo);function vo(e,t){this._config=e,this._traceLogger=t,this._contentBlobFieldNames=null,this._contentBlobFieldNames=!0===this._config.useShortNameForContentBlob?fo.shortNames:fo.longNames}var yo,Io={BUTTON:!0,CHECKBOX:!0,RADIO:!0,RESET:!0,SUBMIT:!0},To=(Co.prototype.pageView=function(){this._analyticsPlugin.capturePageView({isAuto:!0})},Co.prototype.onLoad=function(){var e=this;po(function(){e._analyticsPlugin.capturePageViewPerformance({isAuto:!0}),e._analyticsPlugin.captureContentUpdate({isAuto:!0,isDomComplete:!0})})},Co.prototype.click=function(){var e,t=this,n=C(),i=E();n&&n.addEventListener?(e=~navigator.appVersion.indexOf("MSIE")?"click":"mousedown",n.addEventListener(e,function(e){t._processClick(e)},!1),n.addEventListener("keyup",function(e){t._processClick(e)},!1)):i&&i.attachEvent&&(i.attachEvent("onclick",function(e){t._processClick(e)}),i.attachEvent("keyup",function(e){t._processClick(e)}))},Co.prototype.scroll=function(e){var t=this,n=io(null,function(){t._analyticsPlugin.captureContentUpdate({isAuto:!0,actionType:so.SCROLL})},e.scroll,this);(e=C())&&(e.addEventListener?e.addEventListener("scroll",n):window.attachEvent&&window.attachEvent("onscroll",n))},Co.prototype.maxScroll=function(t){var e=function(){var e=ro();t.v=(t.v>e.v?t:e).v},n=C();n&&(n.addEventListener?n.addEventListener("scroll",e):n.attachEvent&&n.attachEvent("onscroll",e))},Co.prototype.resize=function(e){var t=this,n=io(function(){t._analyticsPlugin.captureContentUpdate({isAuto:!0,actionType:so.RESIZE})},null,e.resize,this);(e=C())&&(e.addEventListener?e.addEventListener("resize",n):e.attachEvent&&e.attachEvent("onresize",n))},Co.prototype.onUnload=function(){var e=this;yn(function(){e._analyticsPlugin.capturePageUnload({isAuto:!0})})},Co.prototype._processClick=function(e){var t={A:!0,BUTTON:!0,AREA:!0,INPUT:!0},n=C(),i=(e=e||n.event).srcElement||e.target,r={isAuto:!0,clickCoordinateX:e.pageX,clickCoordinateY:e.pageY},a="which"in(n=e)?3===n.which:"button"in n?2===n.button:void 0;if(a)r.actionType=so.CLICKRIGHT;else if("which"in(n=e)?1===n.which:"button"in n&&1===n.button)r.actionType=so.CLICKLEFT;else if("keyCode"in(n=e)&&13===n.keyCode)r.actionType=so.KEYBOARDENTER;else if("keyCode"in(n=e)&&32===n.keyCode)r.actionType=so.KEYBOARDSPACE;else{if(!("which"in e?2===e.which:"button"in e&&4===e.button))return;r.actionType=so.CLICKMIDDLE}for(;i&&i.tagName;){if(t[(i=i.control&&t[i.control.tagName.toUpperCase()]?i.control:i).tagName.toUpperCase()]){"INPUT"==i.tagName.toUpperCase()&&!Io[i.type.toUpperCase()]||this._analyticsPlugin.capturePageAction(i,r,{},a);break}i=i.parentElement||i.parentNode}},Co);function Co(e,t){this._analyticsPlugin=e,this._traceLogger=t}function Eo(e,t,n,i,r,a,o){this._webAnalyticsPlugin=e,this._config=t,this._contentHandler=n,this._id=i,this._pageTagsCallback=r,this._metaTags=a,this._traceLogger=o,this._pageTags={}}($e=yo={})[$e.UNDEFINED=0]="UNDEFINED",$e[$e.NAVIGATIONBACK=1]="NAVIGATIONBACK",$e[$e.NAVIGATION=2]="NAVIGATION",$e[$e.NAVIGATIONFORWARD=3]="NAVIGATIONFORWARD",$e[$e.APPLY=4]="APPLY",$e[$e.REMOVE=5]="REMOVE",$e[$e.SORT=6]="SORT",$e[$e.EXPAND=7]="EXPAND",$e[$e.REDUCE=8]="REDUCE",$e[$e.CONTEXTMENU=9]="CONTEXTMENU",$e[$e.TAB=10]="TAB",$e[$e.COPY=11]="COPY",$e[$e.EXPERIMENTATION=12]="EXPERIMENTATION",$e[$e.PRINT=13]="PRINT",$e[$e.SHOW=14]="SHOW",$e[$e.HIDE=15]="HIDE",$e[$e.MAXIMIZE=16]="MAXIMIZE",$e[$e.MINIMIZE=17]="MINIMIZE",$e[$e.BACKBUTTON=18]="BACKBUTTON",$e[$e.STARTPROCESS=20]="STARTPROCESS",$e[$e.PROCESSCHECKPOINT=21]="PROCESSCHECKPOINT",$e[$e.COMPLETEPROCESS=22]="COMPLETEPROCESS",$e[$e.SCENARIOCANCEL=23]="SCENARIOCANCEL",$e[$e.DOWNLOADCOMMIT=40]="DOWNLOADCOMMIT",$e[$e.DOWNLOAD=41]="DOWNLOAD",$e[$e.SEARCHAUTOCOMPLETE=60]="SEARCHAUTOCOMPLETE",$e[$e.SEARCH=61]="SEARCH",$e[$e.SEARCHINITIATE=62]="SEARCHINITIATE",$e[$e.TEXTBOXINPUT=63]="TEXTBOXINPUT",$e[$e.PURCHASE=80]="PURCHASE",$e[$e.ADDTOCART=81]="ADDTOCART",$e[$e.VIEWCART=82]="VIEWCART",$e[$e.ADDWISHLIST=83]="ADDWISHLIST",$e[$e.FINDSTORE=84]="FINDSTORE",$e[$e.CHECKOUT=85]="CHECKOUT",$e[$e.REMOVEFROMCART=86]="REMOVEFROMCART",$e[$e.PURCHASECOMPLETE=87]="PURCHASECOMPLETE",$e[$e.VIEWCHECKOUTPAGE=88]="VIEWCHECKOUTPAGE",$e[$e.VIEWCARTPAGE=89]="VIEWCARTPAGE",$e[$e.VIEWPDP=90]="VIEWPDP",$e[$e.UPDATEITEMQUANTITY=91]="UPDATEITEMQUANTITY",$e[$e.INTENTTOBUY=92]="INTENTTOBUY",$e[$e.PUSHTOINSTALL=93]="PUSHTOINSTALL",$e[$e.SIGNIN=100]="SIGNIN",$e[$e.SIGNOUT=101]="SIGNOUT",$e[$e.SOCIALSHARE=120]="SOCIALSHARE",$e[$e.SOCIALLIKE=121]="SOCIALLIKE",$e[$e.SOCIALREPLY=122]="SOCIALREPLY",$e[$e.CALL=123]="CALL",$e[$e.EMAIL=124]="EMAIL",$e[$e.COMMUNITY=125]="COMMUNITY",$e[$e.SOCIALFOLLOW=126]="SOCIALFOLLOW",$e[$e.VOTE=140]="VOTE",$e[$e.SURVEYINITIATE=141]="SURVEYINITIATE",$e[$e.SURVEYCOMPLETE=142]="SURVEYCOMPLETE",$e[$e.REPORTAPPLICATION=143]="REPORTAPPLICATION",$e[$e.REPORTREVIEW=144]="REPORTREVIEW",$e[$e.SURVEYCHECKPOINT=145]="SURVEYCHECKPOINT",$e[$e.CONTACT=160]="CONTACT",$e[$e.REGISTRATIONINITIATE=161]="REGISTRATIONINITIATE",$e[$e.REGISTRATIONCOMPLETE=162]="REGISTRATIONCOMPLETE",$e[$e.CANCELSUBSCRIPTION=163]="CANCELSUBSCRIPTION",$e[$e.RENEWSUBSCRIPTION=164]="RENEWSUBSCRIPTION",$e[$e.CHANGESUBSCRIPTION=165]="CHANGESUBSCRIPTION",$e[$e.REGISTRATIONCHECKPOINT=166]="REGISTRATIONCHECKPOINT",$e[$e.CHATINITIATE=180]="CHATINITIATE",$e[$e.CHATEND=181]="CHATEND",$e[$e.TRIALSIGNUP=200]="TRIALSIGNUP",$e[$e.TRIALINITIATE=201]="TRIALINITIATE",$e[$e.SIGNUP=210]="SIGNUP",$e[$e.FREESIGNUP=211]="FREESIGNUP",$e[$e.PARTNERREFERRAL=220]="PARTNERREFERRAL",$e[$e.LEARNLOWFUNNEL=230]="LEARNLOWFUNNEL",$e[$e.LEARNHIGHFUNNEL=231]="LEARNHIGHFUNNEL",$e[$e.SHOPPINGINTENT=232]="SHOPPINGINTENT",$e[$e.VIDEOSTART=240]="VIDEOSTART",$e[$e.VIDEOPAUSE=241]="VIDEOPAUSE",$e[$e.VIDEOCONTINUE=242]="VIDEOCONTINUE",$e[$e.VIDEOCHECKPOINT=243]="VIDEOCHECKPOINT",$e[$e.VIDEOJUMP=244]="VIDEOJUMP",$e[$e.VIDEOCOMPLETE=245]="VIDEOCOMPLETE",$e[$e.VIDEOBUFFERING=246]="VIDEOBUFFERING",$e[$e.VIDEOERROR=247]="VIDEOERROR",$e[$e.VIDEOMUTE=248]="VIDEOMUTE",$e[$e.VIDEOUNMUTE=249]="VIDEOUNMUTE",$e[$e.VIDEOFULLSCREEN=250]="VIDEOFULLSCREEN",$e[$e.VIDEOUNFULLSCREEN=251]="VIDEOUNFULLSCREEN",$e[$e.VIDEOREPLAY=252]="VIDEOREPLAY",$e[$e.VIDEOPLAYERLOAD=253]="VIDEOPLAYERLOAD",$e[$e.VIDEOPLAYERCLICK=254]="VIDEOPLAYERCLICK",$e[$e.VIDEOVOLUMECONTROL=255]="VIDEOVOLUMECONTROL",$e[$e.VIDEOAUDIOTRACKCONTROL=256]="VIDEOAUDIOTRACKCONTROL",$e[$e.VIDEOCLOSEDCAPTIONCONTROL=257]="VIDEOCLOSEDCAPTIONCONTROL",$e[$e.VIDEOCLOSEDCAPTIONSTYLE=258]="VIDEOCLOSEDCAPTIONSTYLE",$e[$e.VIDEORESOLUTIONCONTROL=259]="VIDEORESOLUTIONCONTROL",$e[$e.VIRTUALEVENTJOIN=260]="VIRTUALEVENTJOIN",$e[$e.VIRTUALEVENTEND=261]="VIRTUALEVENTEND",$e[$e.IMPRESSION=280]="IMPRESSION",$e[$e.CLICK=281]="CLICK",$e[$e.RICHMEDIACOMPLETE=282]="RICHMEDIACOMPLETE",$e[$e.ADBUFFERING=283]="ADBUFFERING",$e[$e.ADERROR=284]="ADERROR",$e[$e.ADSTART=285]="ADSTART",$e[$e.ADCOMPLETE=286]="ADCOMPLETE",$e[$e.ADSKIP=287]="ADSKIP",$e[$e.ADTIMEOUT=288]="ADTIMEOUT",$e[$e.OTHER=300]="OTHER",Eo.prototype._setBasicProperties=function(e,t){var n;e.ver="1.0",e.id=this._id.getLastPageViewId(),en(e.name)||(e.name=(n=this._config,t&&t.pageName?t.pageName:n.callback&&"function"==typeof n.callback.pageName?n.callback.pageName():n.coreData&&n.coreData.pageName?n.coreData.pageName:t=(n=(t=(H()||{}).pathname||"").split("/"))&&""!==n[n.length-1]?n[n.length-1]:"Undefined")),!en(e.uri)&&$t&&(e.uri=(t=this._config,e=H(),t.coreData&&t.coreData.requestUri&&""!==t.coreData.requestUri?t.coreData.requestUri:function(e,t){if(!t)return null;var n=t.protocol+"//"+(t.hostname||t.host)+(en(t.port)?":"+t.port:"")+t.pathname;if(e.urlCollectHash&&(n+=t.hash||""),e.urlCollectQuery){var i=t.search;return i||-1!=(t=(e=t.hash||"").indexOf("?"))&&(i=e.slice(t)),n+i}return n}(t,e)))},Eo.prototype._setPageTags=function(e,t){var n=this;this._config.coreData&&this._config.coreData.pageTags&&(this._pageTags=gn(!0,this._pageTags,this._config.coreData.pageTags)),this._pageTagsCallback&&(this._pageTags=gn(!0,this._pageTags,this._pageTagsCallback())),en(t.pageTags)&&(this._pageTags=gn(!0,this._pageTags,t.pageTags)),this._metaTags&&(this._pageTags.metaTags={},Q(this._metaTags,function(e,t){"behavior"!=e&&"market"!=e&&"pageType"!=e&&(n._pageTags.metaTags[e]=t)})),e.properties=e.properties||{},e.properties.pageTags=this._pageTags},Eo.prototype._setCommonProperties=function(e,t,n){this._setBasicProperties(e,n),this._setPageTags(e,n),this._pageTypeMetaTag=this._getMetaData(this._metaTags,this._config.coreData,"pageType"),this._marketMetaTag=this._getMetaData(this._metaTags,this._config.coreData,"market"),this._behaviorMetaTag=this._getMetaData(this._metaTags,this._config.coreData,"behavior"),en(n.pageType)&&(e.pageType=n.pageType),en(this._pageTypeMetaTag)&&!en(e.pageType)&&(e.pageType=this._pageTypeMetaTag),en(this._marketMetaTag)&&(e.market=this._marketMetaTag),e.isLoggedIn=(e=this._config).callback&&"function"==typeof e.callback.signedinStatus?e.callback.signedinStatus():e.isLoggedIn,t.cookieEnabled=cn()},Eo.prototype._getMetaData=function(e,t,n){return t&&t[n]?t[n]:e?e[n]:""},Eo.prototype._getBehavior=function(e){var t;return e&&en(e.behavior)?t=e.behavior:en(this._behaviorMetaTag)&&(t=this._behaviorMetaTag),this._getValidBehavior(t)},Eo.prototype._getValidBehavior=function(e){if(en(e)){var t=parseInt(e);if((t=isNaN(t)?yo[e]:t)in yo)return t}return 0};var So,_o=(So=$e=Eo,__extends(No,So),No.prototype.capturePageView=function(e,t){e=en(e)?e:{};var n={},i=en(t)?t:{};this._setCommonProperties(n,i,e),n.refUri=(en(e.referrerUri)?e:this._config.coreData).referrerUri,n.isManual=!e.isAuto,(t=uo(this._config,this._traceLogger))&&(i.cookies=t),i.behavior=this._getBehavior(e),this._webAnalyticsPlugin.trackPageView(n,i)},No);function No(){return null!==So&&So.apply(this,arguments)||this}var bo,xo=(bo=$e,__extends(wo,bo),wo.prototype.trackPageAction=function(e,t){var n={web:{}};n.web.isManual=e.isManual;var i={name:"Ms.Web.PageAction",baseType:"PageActionData",ext:n,data:{},baseData:{},latency:Nt.Normal};i.baseData.name=e.name,i.baseData.uri=e.uri,i.baseData.market=e.market,i.baseData.pageType=e.pageType,i.baseData.isLoggedIn=e.isLoggedIn,i.baseData.id=e.id,i.baseData.properties=e.properties,i.baseData.ver=e.ver,i.baseData.actionType=e.actionType,i.baseData.behavior=e.behavior,i.baseData.clickCoordinates=e.clickCoordinates,i.baseData.content=e.content,i.baseData.contentVer=e.contentVer,i.baseData.targetUri=e.targetUri,Q(t,function(e,t){i.data[e]||(i.data[e]=t)}),this._webAnalyticsPlugin.core.track(i)},wo.prototype.capturePageAction=function(e,t,n,i){t=en(t)?t:{};var r={},a=en(n)?n:{};this._setCommonProperties(r,a,t),r.isManual=!t.isAuto,r.behavior=this._getBehavior(t);var o={};i&&(r.behavior=9),e&&(r.targetUri=function(e){var t="";switch(e.tagName){case"A":case"AREA":t=e.href||"";break;case"IMG":t=function(e){if(e&&1===(e=Qa(e,Za)).length){if(e[0].href)return e[0].href;if(e[0].src)return e[0].src}return""}(e);break;case"INPUT":var n=e.type;n&&co[n.toUpperCase()]&&(n=H()||{},t=e.form?e.form.action||n.pathname||"":n.pathname||"")}return t}(e),(o=gn(o=this._contentHandler.getElementContent(e,oo.PAGE_ACTION),this._getCustomTags(e))).bhvr&&!en(t.behavior)&&(n="bhvr",(i=o)&&i[n]&&(s=i[n],delete i[n]),r.behavior=this._getValidBehavior(s))),en(t.actionType)&&(r.actionType=t.actionType),en(t.clickCoordinateX)&&en(t.clickCoordinateY)&&(r.clickCoordinates=t.clickCoordinateX+"X"+t.clickCoordinateY),r.contentVer="2.0";var s=this._config.callback.pageActionContentTags;r.content=no(JSON.stringify(gn(o,"function"==typeof s?s(e):{},t&&t.contentTags?t.contentTags:{}))),a.timeToAction=this._getTimeToClick(),a.refUri=en(t.refUri)?t.refUri:this._config.coreData.referrerUri,(t=uo(this._config,this._traceLogger))&&(a.cookies=t),this.trackPageAction(r,a)},wo.prototype._getCustomTags=function(e){for(var t,n={};e;){if(!lo(e))for(var i in e.attributes)i&&(!e.attributes[i]||(t=e.attributes[i].name)&&(t.toLowerCase().indexOf("ms.")||(n[t]=e.attributes[i].value)));e=e.parentElement||e.parentNode}return n},wo.prototype._getTimeToClick=function(){var e=_();return e&&e.timing&&(e=e.timing.navigationStart)&&0!==e?(new Date).getTime()-e:-1},wo);function wo(){return null!==bo&&bo.apply(this,arguments)||this}var Ao,Po=(Ao=$e,__extends(Do,Ao),Do.prototype.trackContentUpdate=function(e,t){var n={web:{}};n.web.isManual=e.isManual;var i={name:"Ms.Web.ContentUpdate",baseType:"ContentUpdateData",ext:n,data:{},baseData:{},latency:3};i.baseData.name=e.name,i.baseData.uri=e.uri,i.baseData.market=e.market,i.baseData.pageType=e.pageType,i.baseData.isLoggedIn=e.isLoggedIn,i.baseData.id=e.id,i.baseData.properties=e.properties,i.baseData.ver=e.ver,i.baseData.actionType=e.actionType,i.baseData.behavior=e.behavior,i.baseData.pageHeight=e.pageHeight,i.baseData.content=e.content,i.baseData.contentVer=e.contentVer,i.baseData.vpHeight=e.vpHeight,i.baseData.vpWidth=e.vpWidth,i.baseData.vScrollOffset=e.vScrollOffset,i.baseData.hScrollOffset=e.hScrollOffset,Q(t,function(e,t){i.data[e]||(i.data[e]=t)}),this._webAnalyticsPlugin.core.track(i)},Do.prototype.captureContentUpdate=function(e,t){e=en(e)?e:{};var n={},i=en(t)?t:{};this._setCommonProperties(n,i,e),n.behavior=this._getBehavior(e),en(e.actionType)&&(n.actionType=e.actionType);var r=ao(),t=ro();n.pageHeight=Zt?document.body.scrollHeight:null,n.vpHeight=r.h,n.vpWidth=r.w,n.vScrollOffset=t.v,n.hScrollOffset=t.h,n.contentVer="2.0",n.isManual=!e.isAuto,(t=this._getContentFormatted(e.content)||JSON.stringify(this._contentHandler.getVisibleContent()))&&(n.content=t),en(e.isDomComplete)?i.isDomComplete=e.isDomComplete:i.isDomComplete=!1,this.trackContentUpdate(n,i)},Do.prototype._getContentFormatted=function(e){return en(e)?"[object Array]"===Object.prototype.toString.call(e)?JSON.stringify(e):no(JSON.stringify(e)):undefined},Do);function Do(){return null!==Ao&&Ao.apply(this,arguments)||this}var Oo,ko=(Oo=$e,__extends(Lo,Oo),Lo.prototype.trackPageUnload=function(e,n){var t={web:{}};t.web.isManual=e.isManual;var i={name:"Ms.Web.PageUnload",baseType:"PageUnloadData",ext:t,data:{},baseData:{},latency:Nt.RealTime};i.baseData.name=e.name,i.baseData.uri=e.uri,i.baseData.id=e.id,i.baseData.properties=e.properties,i.baseData.ver=e.ver,i.baseData.market=e.market,i.baseData.pageType=e.pageType,i.baseData.isLoggedIn=e.isLoggedIn,Q(n,function(e,t){i.data[e]||(i.data[e]=n[e])}),this._webAnalyticsPlugin.core.track(i)},Lo.prototype.capturePageUnload=function(e,t){e=en(e)?e:{};var n={},i=en(t)?t:{},t=Zt?document.body.scrollHeight:0;this._setBasicProperties(n,e),n.isManual=!e.isAuto,i.dwellTime=this._timestamp._recordTimeSpan("dwellTime",!0),i.scrollDepth=e.scrollDepth||this._maxScroll.v.toString()+"/"+t.toString(),i.vpHeight=ao().h,i.vScrollOffset=e.vScrollOffset||this._maxScroll.v,!$t||(e=(e=_())?e.timing:null)&&e.loadEventStart&&e.navigationStart&&0<e.loadEventStart&&(i.pageLoadTime=e.loadEventStart-e.navigationStart),this.trackPageUnload(n,i)},Lo);function Lo(e,t,n,i,r,a){var o=Oo.call(this,e,t,null,n,{},{},i)||this;return o._webAnalyticsPlugin=e,o._config=t,o._id=n,o._traceLogger=i,o._timestamp=r,o._maxScroll=a,o}var Ro,Mo=(Ro=$e,__extends(Uo,Ro),Uo.prototype.capturePageViewPerformance=function(e,t){e=en(e)?e:{};var n={},t=en(t)?t:{};this._setBasicProperties(n,e),this._setPageTags(n,e),n.isManual=!e.isAuto,t.behavior=this._getBehavior(e),t.vpHeight=e.vpHeight,t.vpWidth=e.vpWidth,t.framework=e.framework,t.systemTiming=e.systemTiming,t.customTiming=e.customTiming,this._webAnalyticsPlugin._populatePageViewPerformance(n),this._webAnalyticsPlugin.trackPageViewPerformance(n,t)},Uo);function Uo(){return null!==Ro&&Ro.apply(this,arguments)||this}var Vo=(Fo.prototype.createTraceId=function(){return fn().replace(/-/g,"")},Fo.visitorId=function(){return dn("MUID")},Fo.prototype.getTraceId=function(){return this.traceId},Fo.prototype.getLastPageViewId=function(){return this.lastPageViewId},Fo.prototype.initializeIds=function(){this.firstPageView?(this.traceId=this.createTraceId(),this.lastPageViewId=fn()):this.firstPageView=!0},Fo.prototype.getMuidUserId=function(){var e=dn("MUID");return e&&e.length?"t:"+e:e},Fo.prototype.setAppUserId=function(e){if(this.appUserId=null,e){for(var t=0;t<Fo.userIdPrefixes.length;t++)if(Fo.userIdPrefixes[t]===e.substring(0,2)){this.appUserId=e;break}this.appUserId}},Fo.prototype.setDeviceClass=function(e){e&&(this.deviceClass=e)},Fo.prototype.getDeviceClass=function(){return this.deviceClass},Fo.prototype.getAppUserId=function(){return this.appUserId},Fo.prototype.syncMuid=function(e){var t=H();t&&(t=(t.protocol||"http:")+"//"+e+"/c.gif?DI=4050&did=1&t=",(e=E())&&((e=e.createElement("IMG")).style.display="none",e.src=t,e.hidden="",e["aria-hidden"]="true",e.role="presentation"))},Fo.prototype.getMuidHost=function(e){return{"microsoft.com":"c1.microsoft.com","xbox.com":"c.xbox.com","live.com":"c.live.com","microsoftstore.com":"c.microsoftstore.com","msn.com":"c.msn.com","windows.com":"c.windows.com","office.com":"c.office.com"}[e]},Fo.userIdPrefixes=["c:","i:","w:"],Fo);function Fo(){this.appUserId=null,this.firstPageView=!1,this.lastPageViewId=fn(),this.traceId=this.createTraceId()}var Bo=(Ho.prototype._recordTimeSpan=function(e,t){var n=(new Date).getTime();if(t)return n-this._timers[e];this._timers[e]=n},Ho);function Ho(){this._timers=[]}var zo,Go=(zo=zt,__extends(Wo,zo),Wo.prototype.updateCoreDataConfig=function(e){this._config.coreData=gn(!0,this._config.coreData,e)},Wo.prototype._mergeConfig=function(e){var n,t,i={useDefaultContentName:!0,useShortNameForContentBlob:!0,debounceMs:{scroll:600,resize:3e3},biBlobAttributeTag:"data-m",isLoggedIn:!1,shareAuthStatus:!1,cookiesToCollect:["MSFPC","ANON"],autoCapture:{pageView:!0,onLoad:!0,onUnload:!0,click:!0,scroll:!1,resize:!1,lineage:!1,jsError:!0},callback:{pageName:null,pageActionPageTags:null,pageViewPageTags:null,contentUpdatePageTags:null,pageActionContentTags:null,signedinStatus:null},coreData:{referrerUri:Zt?document.referrer:"",requestUri:"",pageName:"",pageType:"",product:"",market:"",pageTags:{}},autoPopulateParentIdAndParentName:!1,syncMuid:!1,muidDomain:"microsoft.com"},r=[];if(Q(i,function(e,t){"object"==typeof i[e]&&r.push(e)}),e)return t=r,Ja(n=e),Bt(t,function(e,t){"object"==typeof n[e]?Ja(n[e]):delete n[e]}),gn(!0,i,e)},Wo.prototype.initialize=function(e,t,n){var i=this,r=t;e.extensionConfig=e.extensionConfig||[],e.extensionConfig[this.identifier]=e.extensionConfig[this.identifier]||{},this._config=this._mergeConfig(e.extensionConfig[this.identifier]);var a=this._config.autoCapture,o=r.getWParam;if(r.getWParam=function(){var e=0;return i._config.mscomCookies&&(e|=1),e|o()},e.extensionConfig[this.identifier].disableExceptionTracking=!a.jsError,zo.prototype.initialize.call(this,e,t,n),this._contentHandler=this._contentHandler||new mo(this._config,this.diagLog()),this._autoCaptureHandler=this._autoCaptureHandler||new To(this,this.diagLog()),this._config.manageCv){for(var s=0;s<n.length;s++)if("CorrelationVectorPlugin"===n[s].identifier){this._config.manageCv=!0,this._cvPlugin=n[s];break}this._cvPlugin||(this.diagLog().throwInternal(te.WARNING,bt.CVPluginNotAvailable,'Automatic Cv management is set to "true" in config.  However, cv plugin is not available. Disabling automatic Cv management'),this._config.manageCv=!1)}this.id=new Vo,this._timespan=new Bo,t=this._contentHandler.getMetadata(),this.pageView=new _o(this,this._config,this._contentHandler,this.id,this._config.callback.pageViewPageTags,t,this.diagLog()),this.pageAction=new xo(this,this._config,this._contentHandler,this.id,this._config.callback.pageActionPageTags,t,this.diagLog()),this.contentUpdate=new Po(this,this._config,this._contentHandler,this.id,this._config.callback.contentUpdatePageTags,t,this.diagLog()),this.pageUnload=new ko(this,this._config,this.id,this.diagLog(),this._timespan,this._maxScroll),this.pageViewPerformance=new Mo(this,this._config,this._contentHandler,this.id,this._config.callback.pageViewPageTags,t,this.diagLog()),this._config.syncMuid&&po(function(){var e=i.id.getMuidHost(i._config.muidDomain);i.id.syncMuid(e)}),a.pageView&&this._autoCaptureHandler.pageView(),a.onLoad&&this._autoCaptureHandler.onLoad(),a.click&&this._autoCaptureHandler.click(),a.scroll&&this._autoCaptureHandler.scroll(this._config.debounceMs),a.resize&&this._autoCaptureHandler.resize(this._config.debounceMs),(a.onUnload||this._config.manualPageUnload)&&this._autoCaptureHandler.maxScroll(this._maxScroll),a.onUnload&&this._autoCaptureHandler.onUnload()},Wo.prototype.processTelemetry=function(e,t){In(e,this.identifier);var n=e;"PageviewData"===n.baseType?(n.name="Ms.Web.PageView",n.latency=Nt.RealTime):"ExceptionData"===n.baseType?(n.name="Ms.Web.ClientError",n.latency=Nt.Normal,delete n.baseData.aiDataContract):"PageviewPerformanceData"===n.baseType&&(n.name="Ms.Web.PageViewPerformance",n.latency=Nt.Normal,delete n.baseData.isValid,delete n.baseData.durationMs),e=null,"PageviewData"!==n.baseType?this._config.manageCv&&(e=this._cvPlugin.getCv())&&e.increment():this._config.manageCv&&((e=this._cvPlugin.getCv())?e.seed():e=this._cvPlugin.getCv());for(var i=!1,r=this._telemetryInitializers.length,a=0;a<r;++a){var o=this._telemetryInitializers[a];if(o&&!1===o.call(null,n)){i=!0;break}}i||this.processNext(n,t)},Wo.prototype.addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},Wo.prototype.trackEvent=function(n,e){n.latency=n.latency||Nt.Normal,n.baseData=n.baseData||{},n.data=n.data||{},en(e)&&Q(e,function(e,t){n.data[e]=t}),this.core.track(n)},Wo.prototype.trackPageView=function(e,t){this._resetPageUnloadProperties(),this.id.initializeIds(),e.id=this.id.getLastPageViewId(),zo.prototype.sendPageViewInternal.call(this,e,t,this._getSystemProperties(e))},Wo.prototype.capturePageView=function(e,t){this.pageView.capturePageView(e,t)},Wo.prototype.trackPageViewPerformance=function(e,t){zo.prototype.sendPageViewPerformanceInternal.call(this,e,t,this._getSystemProperties(e))},Wo.prototype.capturePageViewPerformance=function(e,t){this.pageViewPerformance.capturePageViewPerformance(e,t)},Wo.prototype.trackException=function(e,t){e.id=e.id||fn(),zo.prototype.sendExceptionInternal.call(this,e,t,this._getSystemProperties(e))},Wo.prototype.trackPageAction=function(e,t){this.pageAction.trackPageAction(e,t)},Wo.prototype.capturePageAction=function(e,t,n,i){$a(e,"data-bi-dnt")||this.pageAction.capturePageAction(e,t,n,i)},Wo.prototype.trackContentUpdate=function(e,t){this.contentUpdate.trackContentUpdate(e,t)},Wo.prototype.captureContentUpdate=function(e,t){this.contentUpdate.captureContentUpdate(e,t)},Wo.prototype.trackPageUnload=function(e,t){this._isPageUnloadFired||(this._isPageUnloadFired=!0,this.pageUnload.trackPageUnload(e,t))},Wo.prototype.capturePageUnload=function(e,t){this._isPageUnloadFired||(this._isPageUnloadFired=!0,this.pageUnload.capturePageUnload(e,t))},Wo.prototype._populatePageViewPerformance=function(e){this._pageViewPerformanceManager.populatePageViewPerformanceEvent(e)},Wo.prototype.setContentHandler=function(e){this._contentHandler=e},Wo.prototype.setAutoCaptureHandler=function(e){this._autoCaptureHandler=e},Wo.prototype._getSystemProperties=function(e){var t={};return e.isManual!==undefined&&(t.web={},t.web.isManual=e.isManual===undefined||e.isManual,delete e.isManual),t},Wo.prototype._resetPageUnloadProperties=function(){this._timespan._recordTimeSpan("dwellTime",!1),this._maxScroll.v=0,this._isPageUnloadFired=!1},Wo);function Wo(){var e=zo.call(this)||this;return e.identifier="WebAnalyticsPlugin",e.version="2.4.7",e._maxScroll={h:0,v:0},e._isPageUnloadFired=!1,e._telemetryInitializers=e._telemetryInitializers||[],e}var Ko,qo=["snippet","_webAnalytics","_postChannel","_propertyManager","_extensions"],jo=(Ko=Ht,__extends(Xo,Ko),Xo.prototype.initialize=function(a,o){var s=this,c=this;Ke(c,function(){return"ApplicationInsights:initialize"},function(){var e=[c._propertyManager,c._webAnalytics];if(o&&(e=e.concat(o)),a.channels&&0<a.channels.length){for(var t=!1,n=0;n<a.channels[0].length;n++)if(a.channels[0][n].identifier===c._postChannel.identifier){t=!0;break}t||a.channels[0].push(c._postChannel)}else a.channels=[[c._postChannel]];var i=a.extensionConfig=a.extensionConfig||[];i[c._postChannel.identifier]=a?a.channelConfiguration:{},i[c._propertyManager.identifier]=a?a.propertyConfiguration:{},i[c._webAnalytics.identifier]=a?a.webAnalyticsConfiguration:{};try{Ko.prototype.initialize.call(s,a,e)}catch(r){c.logger.throwInternal(te.CRITICAL,bt.FailedToInitializeSDK,"Failed to initialize SDK."+r)}},function(){return{config:a,extensions:o}})},Xo.prototype.getPropertyManager=function(){return this._propertyManager},Xo.prototype.getPostChannel=function(){return this._postChannel},Xo.prototype.getWebAnalyticsExtension=function(){return this._webAnalytics},Xo.prototype.addTelemetryInitializer=function(e){this._webAnalytics.addTelemetryInitializer(e)},Xo.prototype.trackEvent=function(e,t){this._webAnalytics.trackEvent(e,t)},Xo.prototype.trackPageView=function(e,t){this._webAnalytics.trackPageView(e,t)},Xo.prototype.trackPageAction=function(e,t){this._webAnalytics.trackPageAction(e,t)},Xo.prototype.trackContentUpdate=function(e,t){this._webAnalytics.trackContentUpdate(e,t)},Xo.prototype.trackPageUnload=function(e,t){this._webAnalytics.trackPageUnload(e,t)},Xo.prototype.trackException=function(e,t){this._webAnalytics.trackException(e,t)},Xo.prototype.trackPageViewPerformance=function(e,t){this._webAnalytics.trackPageViewPerformance(e,t)},Xo.prototype.capturePageView=function(e,t){this._webAnalytics.capturePageView(e,t)},Xo.prototype.capturePageViewPerformance=function(e,t){this._webAnalytics.capturePageViewPerformance(e,t)},Xo.prototype.capturePageAction=function(e,t,n,i){this._webAnalytics.capturePageAction(e,t,n,i)},Xo.prototype.captureContentUpdate=function(e,t){this._webAnalytics.captureContentUpdate(e,t)},Xo.prototype.capturePageUnload=function(e,t){this._webAnalytics.capturePageUnload(e,t)},Xo.prototype._onerror=function(e){this._webAnalytics._onerror(e)},Xo.prototype.emptySnippetQueue=function(n){try{if(n&&($.isNullOrUndefined(this._snippetVersion)||this._snippetVersion,Q(this,function(e,t){qt(e)&&!Yt(t)&&e&&"_"!==e[0]&&!~qo.indexOf(e)&&(n[e]=t)})),Jt(n.queue)){for(var e=n.queue.length,t=0;t<e;t++)(0,n.queue[t])();n.queue=undefined,delete n.queue}}catch(i){i&&Yt(i.toString)&&i.toString()}},Xo.prototype.updateSnippetDefinitions=function(e){this.snippet=e,this._snippetVersion=""+(e.sv||e.version||""),Z(e,this,function(e){return e&&!~qo.indexOf(e)})},Xo);function Xo(){var e=Ko.call(this)||this;return e._postChannel=new wr,e._propertyManager=new ji,e._webAnalytics=new Go,e}!function(){try{var e,t,n,i=y();i&&i[n=i.onedsSDK||"oneDSWeb"]!==undefined&&(e=i[n],(t=new jo).updateSnippetDefinitions(e),t.initialize(e.config,e.extensions),(i[n]=t).emptySnippetQueue(e))}catch(r){console&&console.warn("Failed to initialize AppInsights JS SDK for instance "+n+r.message)}}(),e.ActionType=so,e.ApplicationInsights=jo,e.BE_PROFILE=Qi,e.CoreUtils=$,e.DiagnosticLogger=Ue,e.EventLatency=Nt,e.EventPersistence={Normal:1,Critical:2},e.EventsDiscardedReason=U,e.MinChannelPriorty=100,e.NRT_PROFILE=Ji,e.NotificationManager=Tt,e.PostChannel=wr,e.PropertiesPlugin=ji,e.RT_PROFILE=Yi,e.TraceLevel={NONE:0,ERROR:1,WARNING:2,INFORMATION:3},e.Utils=At,e.ValueKind={NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32},function(e,t,n){var i=Object.defineProperty;if(i)try{return i(e,t,n)}catch(r){}typeof n.value!==undefined&&(e[t]=n.value)}(e,"__esModule",{value:!0})};"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).oneDS=e.oneDS||{});
//# sourceMappingURL=ms.analytics-web-2.4.7.min.js.map
